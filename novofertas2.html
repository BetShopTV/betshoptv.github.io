<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BetShop TV - Teste Dinâmico</title>
  <style>
    body{font-family:Arial, sans-serif; margin:18px; color:#222}
    .produto{border:1px solid #ddd; padding:10px; margin:8px 0; border-radius:6px}
    .indisponivel{opacity:.6; background:#fafafa}
    .filtros button{margin:4px 6px; padding:8px 12px; cursor:pointer}
    .filtros button.ativo{background:#007bff;color:#fff}
    .loading{padding:18px;background:#f0f8ff;border-radius:6px}
    #jsonRaw{width:100%;height:160px}
    .meta{font-size:0.9em;color:#555}
  </style>
</head>
<body>
  <h1>BetShop TV — Galeria Dinâmica (Teste)</h1>

  <div class="filtros">
    <button onclick="filtrarTodos()">TODAS</button>
    <button onclick="filtrarGrupo('02')">02</button>
    <button onclick="filtrarGrupo('03')">03</button>
    <button onclick="filtrarGrupo('04')">04</button>
    <button onclick="filtrarGrupo('05')">05</button>
    <button onclick="filtrarGrupo('06')">06</button>
    <button onclick="filtrarGrupo('07')">07</button>
    <button onclick="filtrarGrupo('08')">08</button>
    <button onclick="filtrarDisponivel()">DISPONÍVEIS</button>
  </div>

  <div id="status" class="loading">Carregando produtos...</div>
<div id="ofertas" style="display:grid; gap:20px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); padding:20px;"></div>


  <h3>TORCIDA MOREIRAAAAAAAAA!!!<br>Debug / JSON (raw)</h3>
  <textarea id="jsonRaw" readonly></textarea>

<script>
const endpoint = "https://script.google.com/macros/s/AKfycbyFU0r43A3QdaMch1POe_b8CprB3jzpJe7AnoUBK0NoccMABKVre3xnrAjuMRCdgldPYA/exec";

async function carregarOfertas() {
  try {
    const res = await fetch(endpoint);
    const data = await res.json();
    console.log("JSON recebido:", data); // veja no console do navegador

    const container = document.getElementById("ofertas");
    container.innerHTML = ""; // limpa antes de preencher

    data.produtos.forEach(prod => {
      const card = document.createElement("div");
      card.className = "oferta";
      card.style.border = "1px solid #ccc";
      card.style.padding = "10px";
      card.style.textAlign = "center";
      card.style.borderRadius = "8px";
      card.style.background = prod.disponivel ? "#fff" : "#f5f5f5";
      card.style.opacity = prod.disponivel ? "1" : "0.6";

      card.innerHTML = `
        <img src="${prod.imagens[0]}" alt="${prod.titulo}" style="width:100%;border-radius:6px;">
        <h3>${prod.titulo}</h3>
        <p>${prod.tecnica || ''} ${prod.dimensao ? '— ' + prod.dimensao : ''}</p>
        <p><strong>R$ ${prod.preco || ''}</strong></p>
        ${
          prod.disponivel
            ? '<button style="padding:6px 12px;border:none;background:#2b2424;color:#fff;border-radius:4px;">Comprar</button>'
            : '<span style="color:#ff0000;">Indisponível</span>'
        }
      `;
      container.appendChild(card);
    });
  } catch (err) {
    console.error("Erro ao carregar ofertas:", err);
  }
}

// executa assim que a página carrega
window.addEventListener("DOMContentLoaded", carregarOfertas);
</script>

</body>
</html>
