<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BetShopTV‚¶øcom</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap');

    /* =========================
       === ESTILOS ORIGINAIS ===
       ========================= */
    body {
      margin: 0;
      font-family: 'Roboto Condensed', sans-serif;
      background-color: #bebab0;
      color: #2b2424;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    a { color: #ff0000; text-decoration: none; }
    a:hover { text-decoration: underline; }

    header {
      width: 100%;
      min-height: 25vh;
      padding: 20px 0;
      background-color: #ff0000;
      position: relative;
      overflow: hidden;
    }
    .header-video {
      position: absolute; top: 50%; left: 50%;
      max-height: 100%; width: auto; min-width: 100%;
      object-fit: cover; transform: translate(-50%, -50%);
      background-color: #ff0000;
    }

    main { width: 90%; max-width: 1888px; margin-top: 20px; text-align: center; }
    main h1 { font-size: 1.6em; margin-bottom: 600px; }
    main h2 { font-size: 1.8em; margin: 42px 0 8px; }
    main h3 { font-size: 1.4em; margin: 38px 0 0; }
    main h4 { font-size: 6.6em; color: #ff0000; }
    main v { color: #ff0000; }
    main p { font-size: 1em; color: #2b2424; margin: 4px 0; }

    .button-container,
    .button-container-subitem {
      display: flex; flex-wrap: wrap; justify-content: center;
      gap: 10px; margin: 10px;
    }

    .button-main {
      padding: 4px 13px; height: 50px; border: 2px solid #ff0000;
      background-color: #bebab0; color: #2b2424;
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 1em; font-weight: bold; text-align: center; line-height: 1.2;
      cursor: pointer; white-space: nowrap;
      transition: background-color .5s ease, color .5s ease, border-color .3s ease;
    }
    .button-main:hover { color: #ffffff; }
    .button-main.active {
      background-color: #bebab0; color: #ffffff; border-color: #ff0000;
    }

    .button-VENDIDO {
      padding: 4px 13px; height: 50px; border: 2px solid #ff0000;
      background-color: #ff0000; color: #bebab0;
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 1em; font-weight: bold; text-align: center; line-height: 1.2;
      cursor: pointer; white-space: nowrap;
      transition: background-color .3s, color .3s, border-color .3s;
    }

    .botao-main, .botao-off, .botao-coluna {
      padding: 4px 13px; height: 50px; border: 2px solid;
      color: #ff0000; background-color: #bebab0;
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 1em; font-weight: bold; text-align: center; text-decoration: none; cursor: pointer;
    }
    .botao-main:hover { color: #ff0000; border-color: #ff0000; text-decoration: underline; }
    .botao-subitem, .botao-subitem-off {
      padding: 8px; height: 60px; border: 2px solid;
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 1em; font-weight: bold; text-align: center; text-decoration: none; cursor: pointer;
    }
    .botao-subitem { color:#ff0000; background:#bebab0; }
    .botao-subitem:hover { color:#bebab0; background:#2b2424; border-color:#2b2424; text-decoration: underline; }
    .botao-subitem-off { color:#2b2424; border-color:#2b2424; background:#bebab0; }
    .botao-coluna { color:#bebab0; border-color:#2b2424; background:#2b2424; }
    .botao-off { color:#2b2424; border-color:#2b2424; }

    textarea#selected-text::-webkit-scrollbar { width: 8px; height: 8px; }
    textarea#selected-text::-webkit-scrollbar-thumb { background:#ff0000; border-radius: 2px; }
    textarea#selected-text::-webkit-scrollbar-track { background:#bebab0; }

    .lightbox{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(43,36,36,.69);justify-content:center;align-items:center;z-index:1000}
    .lightbox-overlay{position:absolute;top:0;left:0;width:100%;min-height:100%;background:transparent;z-index:1}

    .conteudo{
      position:relative;width:50%;height:calc(94% - 48px);
      border:2px solid #2b2424;background-image:url('/images/BG-PAP.gif');
      background-color:#bebab0;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;align-items:flex-start;padding:24px;gap:12px;z-index:2
    }
    .conteudo img{flex-shrink:0;height:100%;object-fit:contain}
    .conteudo::-webkit-scrollbar{height:8px}
    .conteudo::-webkit-scrollbar-thumb{background:#2b2424;border-radius:2px}
    .conteudo::-webkit-scrollbar-track{background:transparent}

    .fechar{position:absolute;top:24px;right:24px;color:#ff0000;background:none;border:none;font-size:28px;font-weight:bold;cursor:pointer;z-index:3}

    .marquee-container{width:100%;overflow:hidden;box-sizing:border-box;background:transparent;padding:10px 0;position:relative}
    .marquee-track{display:inline-block;white-space:nowrap;animation:scroll-text 88s linear infinite}
    .marquee-text{display:inline-block;font-size:3em;color:#ff0000;margin-right:38px}
    @keyframes scroll-text{0%{transform:translateX(0%)}100%{transform:translateX(-50%)}}

    /* ===============================
       === FORMUL√ÅRIO DE APOSTAS ===
       =============================== */

    /* Resumo (n√∫meros + total) */
    textarea#selected-text{
      flex-grow:1; max-height:124px; width:224px; resize:none; overflow-y:auto;
      padding:10px; font-family:'Roboto Condensed',sans-serif; font-size:1em;
      border:2px solid #2b2424; border-radius:2px; color:#2b2424; background:#bebab0;
    }
    #total-cost-display{
      font-size:1em; color:#2b2424; background:#bebab0; border:2px solid #2b2424; border-radius:2px;
      min-height:124px; display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; width:100px; font-family:'Roboto Condensed',sans-serif;
    }

    /* Faixa fixa no topo */
    .central-apostas{
      position:sticky; top:0; z-index:999; background:#bebab0;
      padding:10px 0; border-bottom:2px solid #2b2424; width:100%;
    }

    /* Bot√£o APOSTE AQUI! (ETAPA 1) */
    #toggle-apostar{
      width:100%; max-width:524px; color:#fff;
      background-image:url('https://betshoptv.com/images/fofertas_hover.gif');
      border:none; border-radius:2px; padding:14px; font-size:1.2em; font-weight:700; cursor:pointer; margin-top:10px;
    }
    #toggle-apostar:hover{ background-image:url('https://betshoptv.com/images/BG-O.gif'); }

    /* Wrapper das ETAPAS (2, 3a/3b, 4) */
    .apostar-wrapper{ max-width:820px; width:100%; margin:10px auto 0; display:none; flex-direction:column; gap:12px; }

    .painel-apostar{ background:#bebab0; border:2px solid #2b2424; border-radius:2px; padding:14px; }
    .painel-titulo{ font-size:1.2em; text-align:left; margin:6px 0 8px 2px; }

    /* Campos etapa 2 */
    .linha-form{ display:flex; gap:10px; margin-bottom:10px; flex-wrap:wrap; }
    .linha-form input{
      flex:1 1 160px; min-height:14px; padding:10px 12px; font-family:'Roboto Condensed',sans-serif; font-size:.88em;
      border-radius:2px; outline:none; background:#bebab0; border:2px solid #2b2424; color:#2b2424;
    }
    .linha-form input::placeholder{ color:#2b2424; opacity:.7; }

    .row-actions{ display:flex; gap:10px; flex-wrap:wrap; }
    .btn-cancelar, .btn-proxima, .btn-voltar, .botao-apostar, .btn-site, .btn-copiar, .btn-etapa4 {
      border-radius:2px; font-weight:900; cursor:pointer; transition:.2s ease;
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
    }
    .btn-cancelar{
      background:#2b2424; color:#fff; border:2px solid #2b2424; height:52px; padding:0 18px; min-width:160px;
    }
    .btn-proxima{
      background:#ff0000; color:#fff; border:2px solid #ff0000; height:52px; padding:0 26px; flex:1;
    }

    /* ETAPA 3 layout */
    .etapa3{
      display:grid; grid-template-columns: 230px 1fr; gap:14px; align-items:stretch;
    }
    .col-left{ display:flex; flex-direction:column; gap:10px; }
    .col-right{ display:flex; flex-direction:column; gap:10px; }

    .btn-left, .btn-voltar{
      width:100%; height:48px; font-weight:900; font-size:1.0em; border:2px solid #2b2424; background:#2b2424; color:#fff;
    }
    .btn-left.is-selected{ background:#ff0000; border-color:#ff0000; }
    .btn-left[disabled]{ opacity:.9; cursor:default; }

    .qr-area{
      background:#fff; border:2px solid #2b2424; border-radius:2px;
      height:220px; display:flex; align-items:center; justify-content:center;
    }
    .qr-area img{ max-width:100%; max-height:100%; object-fit:contain; }

    .row-submit{ display:grid; grid-template-columns: 230px 1fr; gap:14px; }
    .btn-voltar{ background:#2b2424; color:#fff; }
    .botao-apostar{
      width:100%; min-height:50px; border:2px solid #ff0000; border-radius:2px; background:#ff0000; color:#fff; font-weight:900; font-size:1.15em;
    }
    .botao-apostar[disabled]{ opacity:.7; cursor:not-allowed; }

    /* bot√µes auxiliares do meio da coluna esquerda */
    .btn-copiar, .btn-site{
      width:100%; height:48px; font-size:.98em; font-weight:900; border:2px solid #2b2424; background:#2b2424; color:#fff;
    }

    /* ETAPA 4 */
    .centered{ display:flex; align-items:center; justify-content:center; }
    .btn-etapa4{ background:#ff0000; color:#fff; border:2px solid #ff0000; height:56px; padding:0 22px; }

    /* Responsivo */
    @media (max-width: 560px){
      #total-cost-display{ width:96px; }
      .etapa3, .row-submit{ grid-template-columns: 1fr; }
      .col-left, .col-right{ width:100%; }
    }

    /* Ajustes extras mobile p/ rifas e menu (mantidos) */
    @media (max-width: 768px) {
      #gridA .button-container{ display:flex !important; flex-wrap:wrap !important; justify-content:center !important; gap:8px !important; align-items:center !important; margin:0 8px !important; }
      #gridA .button-main, #gridA .button-VENDIDO{
        display:inline-flex !important; flex:0 0 auto !important; width:auto !important;
        max-width:calc(100% - 20px) !important; white-space:nowrap !important;
        font-size:clamp(.72rem,2.8vw,1rem) !important; padding:6px 10px !important; height:auto !important; box-sizing:border-box !important; text-align:center !important;
      }
      #gridA{ overflow-x:hidden !important; }
      .button-container{
        display:flex !important; flex-wrap:wrap !important; justify-content:center !important; gap:8px !important; align-items:center !important; margin:0 8px !important;
      }
      .button-container .botao-main, .button-container .botao-off{
        display:inline-flex !important; flex:0 0 auto !important; width:auto !important;
        max-width:calc(100% - 20px) !important; white-space:nowrap !important;
        font-size:clamp(.72rem,2.8vw,1rem) !important; padding:6px 10px !important; height:auto !important; box-sizing:border-box !important; text-align:center !important;
      }
      header{ min-height:100px; max-height:118px; padding:4px; }
      .header-video{ max-height:100%; width:auto; object-fit:cover; object-position:center; transform:translate(-50%,-50%); }
    }
  </style>
</head>
<body>
  <header>
    <a href="https://betshoptv.com"><video class="header-video" autoplay loop muted playsinline>
      <source src="https://betshoptv.com/images/base-02-cabe%C3%A7alho%202.mp4" type="video/mp4">
      Seu navegador n√£o suporta a tag de v√≠deo.
    </video></a>
  </header>

  <!-- MENU -->
  <div class="button-container" style="padding: 0 50px;">
    <a href="https://betshoptv.com/como.html" class="botao-main">COMO<br>FUNCIONA?</a>
    <div class="botao-off" style="background-image:url('https://betshoptv.com/images/BG-BOTAO.gif');background-position:50% 52%;">APOSTE<br>RIFAS</div>
    <a href="https://betshoptv.com/ofertas.html" class="botao-main" style="background-image:url('https://betshoptv.com/images/BG-BOTAO.gif');background-position:50% 52%;">APOSTE<br>OFERTAS</a>
    <a href="https://betshoptv.com/galeria.html" class="botao-main">GALERIA<br>DE IMAGENS</a>
    <a href="https://betshoptv.com/contato.html" class="botao-main">FALE<br>CONOSCO</a>
  </div>

  <main>
    <br>
    <center>
      <div style="max-width:800px;width:100%;background-image:url('https://betshoptv.com/images/BGV_inicio-rapido-mais-longo_preto.gif');background-color:#ff0000;border:2px solid #ff0000;">
        <img src="https://betshoptv.com/images/COMO-CSA1b.png"
             class="imagem-interativa"
             data-index="0"
             data-sequencia="https://betshoptv.com/images/COMO-CSA1b.png,https://betshoptv.com/images/COMO-CSA2d.png"
             style="cursor:pointer;margin-bottom:-4px;width:100%;background-image:url('https://betshoptv.com/images/BG-COMO.gif');">
      </div>
    </center>

    <br>

    <!-- ============ IN√çCIO - CENTRAL DE APOSTAS (STICKY) ============ -->
    <div class="central-apostas">
      <center>
        <div style="display:flex;justify-content:center;margin-top:10px;width:100%;">
          <div style="display:flex;max-width:100%;width:740px;gap:10px;align-items:stretch;">
            <textarea id="selected-text" readonly>üëÅ LISTA de APOSTAS üëÅ</textarea>
            <div id="total-cost-display">
              <p style="margin:0 0 5px;font-weight:bold;">QTD.</p>
              <p id="selected-count" style="margin:0 0 13px;font-size:1.2em;font-weight:bold;">0</p>
              <p style="margin:0 0 5px;font-weight:bold;">TOTAL</p>
              <p id="calculated-cost" style="margin:0;font-size:1.5em;font-weight:bold;">$0</p>
            </div>
          </div>
        </div>

        <!-- ETAPA 1: bot√£o de entrada -->
        <button id="toggle-apostar">APOSTE AQUI!</button>

        <!-- ETAPAS 2/3/4 -->
        <div class="apostar-wrapper" id="apostar-wrapper">

          <!-- ===== ETAPA 2 ===== -->
          <form id="form-aposta"
                class="painel-apostar"
                action="https://formsubmit.co/e47cb3b75ceb71fc080318c811d80f13"
                method="POST"
                target="hidden_iframe">

            <div class="painel-titulo">Preencha os campos abaixo:</div>
            <div class="linha-form">
              <input id="nome" name="NOME" type="text" placeholder="NOME" required>
            </div>
            <div class="linha-form">
              <input id="email" name="E-MAIL" type="email" placeholder="E-MAIL" required>
              <input id="whats" name="TELEFONE/WHATSAPP" type="tel" placeholder="Telefone / WhatsApp" required>
            </div>

            <div class="row-actions">
              <button type="button" class="btn-cancelar" id="btn-cancelar">CANCELAR</button>
              <button type="button" class="btn-proxima" id="btn-proxima">PR√ìXIMA ‚∏ß</button>
            </div>

            <!-- Campos ocultos p/ envio -->
            <input type="hidden" id="hidden-apostas" name="LISTA de APOSTAS" value="">
            <input type="hidden" id="hidden-qtd" name="QTD." value="0">
            <input type="hidden" id="hidden-total" name="TOTAL" value="$0">
            <input type="hidden" name="_subject" id="hidden-subject" value="APOSTA">
            <input type="hidden" name="_template" value="table">
            <input type="hidden" name="_next" value="https://betshoptv.com/obrigado.html">

            <!-- ===== ETAPA 3 (container) ===== -->
            <div id="etapa3" style="display:none; margin-top:12px;">
              <div class="painel-titulo">Escolha a forma de pagamento:</div>

              <div class="etapa3">
                <div class="col-left">
                  <!-- 3a: PIX selecionado -->
                  <button class="btn-left is-selected" type="button" id="btn-pix" aria-pressed="true">PIX</button>
                  <button class="btn-copiar" type="button" id="btn-copiar-pix">COPIA e COLA</button>

                  <!-- 3b: PayPal (aparece como n√£o selecionado nesta etapa) -->
                  <button class="btn-left" type="button" id="btn-paypal">PayPal</button>
                  <button class="btn-site" type="button" id="btn-site-paypal" style="display:none;">Site PayPal</button>
                </div>

                <div class="col-right">
                  <!-- √Årea de QR que muda entre 3a e 3b -->
                  <div class="qr-area" id="qr-area">
                    <img id="qr-img" src="https://betshoptv.com/images/placeholder-pix.png" alt="QR Code PIX">
                  </div>
                </div>
              </div>

              <div class="row-submit" style="margin-top:8px;">
                <button type="button" class="btn-voltar" id="btn-voltar">‚∏¶ VOLTAR</button>
                <button id="btn-apostar" class="botao-apostar" type="submit">‚¶ø   APOSTAR!   ‚¶ø</button>
              </div>
            </div>
          </form>
          <iframe name="hidden_iframe" style="display:none;"></iframe>

          <!-- ===== ETAPA 4 ===== -->
          <div id="etapa4" class="painel-apostar centered" style="display:none;">
            <button type="button" class="btn-etapa4" id="btn-recomecar">ABALOU QUIWRIDA!!</button>
          </div>
        </div>
      </center>
    </div>
    <!-- ============ FIM - CENTRAL DE APOSTAS (STICKY) ============ -->

    <section style="text-align:left; margin-top:30px; max-width:100%; margin-left:auto; margin-right:auto; color:#2b2424; font-size:1em; line-height:1.5;">
      <div id="gridA" class="grid-column">
        <div style="margin-top: 8px;" class="button-container">
          <button class="button-VENDIDO" style="border: 0px; background-color:#bebab0; color:#2b2424; font-weight: normal;" disabled>LEGENDA:&nbsp;</button>
          <button class="button-VENDIDO" style="margin-right: -2px; margin-left: -15px; background-color:#bebab0; color:#2b2424;" data-hover-color="#FF1493" disabled>DISPON√çVEL</button>
          <button class="button-VENDIDO" disabled>INDISPON√çVEL</button>
        </div>
        <br><br>
        <div class="button-container">
          <!-- X001 a X037 apenas -->
          <button class="button-main" data-hover-color="#FF4500">X001 / 40 graus</button>
          <button class="button-main" data-hover-color="#B22222">X002 / 5¬™ avenida</button>
          <button class="button-main" data-hover-color="#FF1493">X003 / Acionando o contatinho</button>
          <button class="button-main" data-hover-color="#FF69B4">X004 / Ai, amiga</button>
          <button class="button-main" data-hover-color="#FFE4E1">X005 / Algod√£o doce</button>
          <button class="button-main" data-hover-color="#FFDAB9">X006 / Amanhecer</button>
          <button class="button-main" data-hover-color="#FFD700">X007 / Amarelo Frevo</button>
          <button class="button-main" data-hover-color="#8B0000">X008 / Ameixa</button>
          <button class="button-main" data-hover-color="#87CEEB">X009 / Ar Fresco</button>
          <button class="button-main" data-hover-color="#F5DEB3">X010 / Areia</button>
          <button class="button-main" data-hover-color="#4682B4">X011 / Atmosfera</button>
          <button class="button-main" data-hover-color="#1E90FF">X012 / Azul Eclesi√°stico</button>
          <button class="button-main" data-hover-color="#0000FF">X013 / Azul bi√¥nico</button>
          <button class="button-main" data-hover-color="#D2B48C">X014 / Batida de Amendoim</button>
          <button class="button-main" data-hover-color="#FFFFF0">X015 / Batida de coco</button>
          <button class="button-main" data-hover-color="#FF6347">X016 / Beijo roubado</button>
          <button class="button-main" data-hover-color="#32CD32">X017 / Bem-Estar</button>
          <button class="button-main" data-hover-color="#000000">X018 / Black</button>
          <button class="button-main" data-hover-color="#FF7F50">X019 / Bolsa de Praia</button>
          <button class="button-main" data-hover-color="#FFC0CB">X020 / Boneca</button>
          <button class="button-main" data-hover-color="#FFD700">X021 / Brinde da virada</button>
          <button class="button-main" data-hover-color="#DAA520">X022 / Brocado Rico</button>
          <button class="button-main" data-hover-color="#6F4E37">X023 / Caf√©</button>
          <button class="button-main" data-hover-color="#008000">X024 / Caminho do Jardim</button>
          <button class="button-main" data-hover-color="#8B4513">X025 / Camur√ßa</button>
          <button class="button-main" data-hover-color="#D2B48C">X026 / Capuccino Doce</button>
          <button class="button-main" data-hover-color="#DEB887">X027 / Casa Portuguesa</button>
          <button class="button-main" data-hover-color="#FFA07A">X028 / Casamento do Ver√£o</button>
          <button class="button-main" data-hover-color="#87CEEB">X029 / Chafariz da Pra√ßa</button>
          <button class="button-main" data-hover-color="#696969">X030 / Cinza Tecnol√≥gico</button>
          <button class="button-main" data-hover-color="#808080">X031 / Cinza minimalista</button>
          <button class="button-main" data-hover-color="#FFFFFF">X032 / Cl√°ssico</button>
          <button class="button-main" data-hover-color="#A9A9A9">X033 / Colinas de Inverno</button>
          <button class="button-main" data-hover-color="#C0C0C0">X034 / Concha Prateada</button>
          <button class="button-main" data-hover-color="#FF7F50">X035 / Coral n√£o tem igual</button>
          <button class="button-main" data-hover-color="#CD853F">X036 / Corpo bronzeado</button>
          <button class="button-main" data-hover-color="#FFD700">X037 / Corpo tropical</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Rota√ß√£o da imagem de instru√ß√£o -->
  <script>
    document.querySelectorAll('.imagem-interativa').forEach(img=>{
      img.addEventListener('click',()=>{
        const seq=img.dataset.sequencia.split(',');
        let idx=parseInt(img.dataset.index||'0',10); idx=(idx+1)%seq.length;
        img.src=seq[idx]; img.dataset.index=idx;
      });
    });
  </script>

  <!-- Script principal -->
  <script>
    // DOM principais
    const gridA = document.getElementById('gridA');
    const selectionBox = document.getElementById('selected-text');
    const toggleBtn = document.getElementById('toggle-apostar');
    const wrapper = document.getElementById('apostar-wrapper');

    // Form & campos
    const form = document.getElementById('form-aposta');
    const nomeInput = document.getElementById('nome');
    const emailInput = document.getElementById('email');
    const whatsInput = document.getElementById('whats');
    const hiddenApostas = document.getElementById('hidden-apostas');
    const hiddenQtd = document.getElementById('hidden-qtd');
    const hiddenTotal = document.getElementById('hidden-total');
    const hiddenSubject = document.getElementById('hidden-subject');
    const btnApostar = document.getElementById('btn-apostar');

    // Etapas
    const etapa3 = document.getElementById('etapa3');
    const etapa4 = document.getElementById('etapa4');
    const btnCancelar = document.getElementById('btn-cancelar');
    const btnProxima = document.getElementById('btn-proxima');
    const btnVoltar = document.getElementById('btn-voltar');
    const btnRecomecar = document.getElementById('btn-recomecar');

    // 3a/3b
    const btnPix = document.getElementById('btn-pix');
    const btnPaypal = document.getElementById('btn-paypal');
    const btnCopiarPix = document.getElementById('btn-copiar-pix');
    const btnSitePaypal = document.getElementById('btn-site-paypal');
    const qrArea = document.getElementById('qr-area');
    const qrImg = document.getElementById('qr-img');

    let selectedItems = [];

    // Util: contraste
    function getContrastColor(hex){
      function hexToRgb(h){ const x=parseInt(h.replace('#',''),16); return [(x>>16)&255,(x>>8)&255,x&255]; }
      function L([r,g,b]){ const f=v=>{v/=255; return v<=.03928? v/12.92: Math.pow((v+.055)/1.055,2.4)}; return .2126*f(r)+.7152*f(g)+.0722*f(b); }
      try{
        const bgL=L(hexToRgb(hex));
        const opts=['#ffffff','#ff0000','#bebaba','#2b2424'];
        return opts.sort((a,b)=>Math.abs(bgL-L(hexToRgb(b)))-Math.abs(bgL-L(hexToRgb(a))))[0];
      }catch(e){ return '#ffffff';}
    }

    // Regra de pre√ßo
    function calculateTotalCost(n){ if(n<=0) return 0; return (n%2===0)? n*25 : ((n-1)*25)+30; }

    // Atualiza resumo/hidden/assunto
    function updateSelection() {
      selectionBox.value = selectedItems.length ? selectedItems.join('\n') : 'üëÅ LISTA de APOSTAS üëÅ';
      const qtd = selectedItems.length;
      const total = calculateTotalCost(qtd);
      document.getElementById('selected-count').textContent = qtd;
      document.getElementById('calculated-cost').textContent = `$${total}`;
      hiddenApostas.value = selectedItems.join('\n');
      hiddenQtd.value = String(qtd);
      hiddenTotal.value = `$${total}`;
      const nome = (nomeInput?.value || '').trim() || 'Cliente';
      hiddenSubject.value = `APOSTA / ${nome} / $${total}`;
    }

    // Sele√ß√£o dos bot√µes (usa texto completo!)
    document.querySelectorAll('#gridA .button-container button.button-main').forEach(button=>{
      const hoverColor = button.dataset.hoverColor;
      let fadeTimeout = null;

      button.addEventListener('mouseover', ()=>{
        clearTimeout(fadeTimeout);
        if(hoverColor){
          button.style.backgroundColor = hoverColor;
          button.style.color = getContrastColor(hoverColor);
          button.style.borderColor = hoverColor;
        } else {
          button.style.backgroundColor = '#ff0000';
          button.style.color = '#ffffff';
          button.style.borderColor = '#ff0000';
        }
      });

      button.addEventListener('mouseout', ()=>{
        clearTimeout(fadeTimeout);
        const randomDelay = Math.floor(Math.random()*(1802-188+1))+188;
        fadeTimeout = setTimeout(()=>{
          if(!button.classList.contains('active')){
            button.style.backgroundColor=''; button.style.color=''; button.style.borderColor='';
          }
        }, randomDelay);
      });

      button.addEventListener('click', ()=>{
        const label = button.textContent.trim(); // TEXTO COMPLETO
        const idx = selectedItems.indexOf(label);
        if(idx>-1){
          selectedItems.splice(idx,1);
          button.classList.remove('active');
          button.style.backgroundColor=''; button.style.color=''; button.style.borderColor='';
        }else{
          selectedItems.push(label);
          button.classList.add('active');
          if(hoverColor){
            button.style.backgroundColor = hoverColor;
            button.style.color = getContrastColor(hoverColor);
            button.style.borderColor = hoverColor;
          } else {
            button.style.backgroundColor = '#ff0000';
            button.style.color = '#ffffff';
            button.style.borderColor = '#ff0000';
          }
        }
        updateSelection();
      });
    });

    // ETAPA 1 -> abre wrapper e mostra ETAPA 2
    toggleBtn?.addEventListener('click', ()=>{
      wrapper.style.display = 'flex';
      etapa3.style.display = 'none';
      etapa4.style.display = 'none';
      // foca no primeiro campo
      setTimeout(()=>nomeInput?.focus(), 60);
    });

    // CANCELAR -> fecha e volta para ETAPA 1
    btnCancelar?.addEventListener('click', ()=>{
      wrapper.style.display = 'none';
    });

    // PR√ìXIMA -> valida e vai para ETAPA 3a (PIX)
    btnProxima?.addEventListener('click', ()=>{
      if(!nomeInput.value.trim() || !emailInput.value.trim() || !whatsInput.value.trim()){
        alert('Preencha Nome, E-mail e Telefone/WhatsApp para continuar.');
        return;
      }
      etapa3.style.display = 'block';
      // 3a (PIX) por padr√£o
      setEtapa3Mode('pix');
      // rola o wrapper para ficar todo vis√≠vel
      wrapper.scrollIntoView({behavior:'smooth', block:'nearest'});
    });

    // VOLTAR -> retorna √† ETAPA 2
    btnVoltar?.addEventListener('click', ()=>{
      etapa3.style.display = 'none';
      // mant√©m wrapper aberto com etapa 2 √† vista
    });

    // Modo 3a (PIX) / 3b (PayPal)
    function setEtapa3Mode(mode){
      if(mode==='pix'){
        btnPix.classList.add('is-selected'); btnPix.setAttribute('aria-pressed','true'); btnPix.disabled = true;
        btnPaypal.classList.remove('is-selected'); btnPaypal.setAttribute('aria-pressed','false'); btnPaypal.disabled = false;
        btnSitePaypal.style.display = 'none';
        btnCopiarPix.style.display = 'inline-flex';
        qrImg.src = 'https://betshoptv.com/images/placeholder-pix.png';
        qrImg.alt = 'QR Code PIX';
      }else{
        btnPaypal.classList.add('is-selected'); btnPaypal.setAttribute('aria-pressed','true'); btnPaypal.disabled = true;
        btnPix.classList.remove('is-selected'); btnPix.setAttribute('aria-pressed','false'); btnPix.disabled = false;
        btnSitePaypal.style.display = 'inline-flex';
        btnCopiarPix.style.display = 'none';
        qrImg.src = 'https://betshoptv.com/images/placeholder-paypal.png';
        qrImg.alt = 'QR Code PayPal';
      }
    }
    btnPix?.addEventListener('click', ()=> setEtapa3Mode('pix'));
    btnPaypal?.addEventListener('click', ()=> setEtapa3Mode('paypal'));

    // Copiar PIX (mensagens como antes)
    btnCopiarPix?.addEventListener('click', (e)=>{
      const payload = "00020126410014BR.GOV.BCB.PIX0119betshoptv@gmail.com5204000053039865911BET SHOP TV6009SAO PAULO62070503***63048AB7";
      const btn = e.currentTarget;
      navigator.clipboard.writeText(payload).then(()=>{
        btn.textContent = 'PIX COPIADO!';
        setTimeout(()=>{ btn.textContent = 'COPIA e COLA'; }, 5000);
      }).catch(()=> alert('Falha ao copiar o c√≥digo PIX.'));
    });

    // Site PayPal em nova aba
    btnSitePaypal?.addEventListener('click', ()=>{
      window.open('https://www.paypal.com/donate/?hosted_button_id=369CQUU2V8P5G','_blank');
    });

    // Atualiza assunto dinamicamente
    nomeInput?.addEventListener('input', updateSelection);

    // Submit (FormSubmit)
    form?.addEventListener('submit', (ev)=>{
      if(selectedItems.length===0){
        ev.preventDefault();
        alert('Selecione ao menos 1 n√∫mero para apostar.');
        return;
      }
      updateSelection();
      btnApostar.disabled = true;
      btnApostar.textContent = 'ENVIANDO APOSTA...';

      // Ap√≥s 5s (feedback), mostra "APOSTA ENVIADA!"
      setTimeout(()=>{
        btnApostar.textContent = 'APOSTA ENVIADA!';
        // +3s => ETAPA 4
        setTimeout(()=>{
          document.getElementById('etapa3').style.display='none';
          document.getElementById('etapa4').style.display='block';
        }, 3000);
      }, 5000);
    });

    // ETAPA 4 -> reset para ETAPA 1
    btnRecomecar?.addEventListener('click', ()=>{
      // limpa sele√ß√£o
      selectedItems = [];
      document.querySelectorAll('#gridA .button-container button.button-main.active').forEach(b=>{
        b.classList.remove('active'); b.style.backgroundColor=''; b.style.color=''; b.style.borderColor='';
      });
      updateSelection();

      // limpa formul√°rio
      form.reset();
      etapa4.style.display = 'none';
      wrapper.style.display = 'none';
      btnApostar.disabled = false;
      btnApostar.textContent = '‚¶ø   APOSTAR!   ‚¶ø';
      setEtapa3Mode('pix');
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // Inicializa√ß√£o
    updateSelection();
  </script>

  <br><br><br><br><br><br>
</body>
</html>
