<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>BSTV ‚Äî Galeria com BARRA SHOPPING</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#bebab0; --text:#2b2424; --accent:#ff0000; --white:#bebab0;
  --footer-h: clamp(46px,6vh,64px);
}
*{box-sizing:border-box}
body{
  margin:0; font-family:'Roboto Condensed',sans-serif; background:var(--bg); color:var(--text);
  padding:1vw 1vw 6.2rem; /* espa√ßo para footer */
  -webkit-font-smoothing:antialiased;
}
a{color:var(--accent);}
h1{font-size:1.2rem;margin:0 0 1rem}

/* gallery layout (3 col) */
.container{max-width:1200px;margin:0 auto}
.filter-bar{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-bottom:16px;}
.filter-btn{padding:6px 12px;border:2px solid var(--accent);background:transparent;color:var(--accent);font-weight:700;cursor:pointer}
.filter-btn.disabled{border:2px dashed #fff;background:#fff;color:var(--text);cursor:default}
.shuffle-btn{border:2px dashed var(--accent)}
.reset-btn{border:2px solid #2b2424;background:#2b2424;color:#fff}
.recent-btn{border:2px solid var(--accent)}

.gallery-container{display:flex;gap:clamp(4px,1.2vw,24px);max-width:1200px;margin:0 auto}
.col{flex:1 1 calc(33.333% - 1.333vw); display:flex; flex-direction:column; gap:24px; max-width:calc((min(1200px,100vw)-4vw)/3);}

/* item */
.gallery-item{display:flex;flex-direction:column; background:var(--bg); cursor:pointer; position:relative}
.gallery-image{width:100%;height:auto;display:block;object-fit:cover} /* no rounding per request */
.item-code{position:absolute;left:50%;top:0;transform:translate(-50%,-50%);font-family:'Roboto Mono',monospace;border:2px solid #2b2424;padding:.35vw .9vw;background:var(--bg);font-weight:700;font-size:clamp(.7rem,1.6vw,1.05rem)}
.add-button{border:2px solid var(--accent);background:transparent;color:var(--accent);font-weight:700;padding:8px;text-transform:uppercase;cursor:pointer;margin-top:12px;margin-bottom:24px;width:100%;}

/* FEED (post) */
/* FEED (post) */
#feed {
  display: none;
  max-width: 1200px;
  margin: 0 auto 8rem;
}

/* Scrollbar da galeria horizontal */
.carousel {
  display: flex;
  gap: 24px;
  overflow-x: auto;
  align-items: center;
  scroll-snap-type: none;
}

/* Customiza√ß√£o do scrollbar */
.carousel::-webkit-scrollbar {
  height: 8px; /* altura da barra horizontal */
}

.carousel::-webkit-scrollbar-thumb {
  background-color: #ff0000; /* vermelho */
}

.carousel::-webkit-scrollbar-track {
  background: #bebab0; /* bege */
}

.post{margin-bottom:28px}
.carousel-wrap{border:2px solid #2b2424;padding:18px}
 /* continuous scroll */
.slide{flex:0 0 auto;display:flex;align-items:center;justify-content:center}
.slide img{max-width:100%;max-height: 66vh; object-fit:contain}

/* piece info */
.piece-info{padding:12px 8px;display:flex;flex-direction:column;gap:6px}
.title-row{display:flex;justify-content:space-between;align-items:center}
.piece-title,.piece-price{font-weight:700;font-size:clamp(1rem,2.2vw,1.1rem)}
.piece-tech,.piece-dims{font-size:clamp(.85rem,1.6vw,1rem)}

/* actions */
.actions-row{display:flex;gap:12px;padding:8px 12px}
.btn{height:44px;border:2px solid var(--accent);background:transparent;color:var(--accent);font-weight:700;cursor:pointer;padding:0 14px}
.btn.no-round{border-radius:0}
.heart.active{background:var(--accent);color:var(--white)}

/* footer / BARRA SHOPPING */
.footer-bar{position:fixed;left:0;right:0;bottom:0;background:#2b2424;color:var(--white);height:var(--footer-h);display:flex;align-items:center;justify-content:space-between;padding:0 27vw;z-index:9999;font-weight:700}
.footer-left{display:flex;align-items:center;gap:8px}
.footer-dot{width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.footer-dot svg{fill:var(--white)}
.footer-panels{display:flex;gap:8px;align-items:center}
.panel-btn{background:transparent;border:0;color:var(--white);font-weight:700;cursor:pointer;position:relative;padding:8px}

/* expanded panel (overlay above footer) */
.panel-expanded{position:fixed;left:0;right:0;bottom:var(--footer-h);background:#bebab0;max-height:45vh;border-top:1px solid #2b2424;display:none;padding:0 27vw;z-index:9998;overflow:hidden}
.panel-row{display:flex;align-items:center;gap:12px;height:100%}
.mini-list{display:flex;gap:12px;overflow-x:auto;align-items:center;padding:8px 4px}
.mini-item{flex:0 0 auto;display:flex;gap:8px;align-items:center;border:1px solid #2b2424;padding:6px;background:transparent}
.mini-thumb{width:42px;height:50px;object-fit:cover; border:1px solid #2b2424}
/* Customiza√ß√£o do scrollbar */
.mini-list::-webkit-scrollbar {
  height: 12px; /* altura da barra horizontal */
  }

.mini-list::-webkit-scrollbar-thumb {
  background-color: #bebab0; border: 12px solid #2b2424; border-top: 0px ; border-bottom: 0px; border-left: 12px solid #2b2424; /* vermelho */
}

.mini-list::-webkit-scrollbar-track {
  background: #bebab0; /* bege */
}
/* totals */
.total-box{padding:6px 10px;background:transparent;color:var(--white);font-weight:700}

/* responsive tweaks */
@media(max-width:768px){
  .col{flex-basis:calc(33.333% - 8px)}
.mini-thumb{width:33px;height:42px;object-fit:cover; border:1px solid #2b2424}
  .footer-bar{padding:0 12px}
  .panel-expanded{padding: 0 12px;}
  .slide img{max-width:100%;max-height: 66vh; object-fit:contain}
}
</style>
</head>
<body>

<div class="container">
  <h1>Galeria de Ofertas ‚Äî BSTV</h1>

  <!-- filtros (exemplo - segue seu layout) -->
  <div class="filter-bar">
    <button class="filter-btn disabled" data-group="02">02</button>
    <button class="filter-btn" data-group="03">03</button>
    <button class="filter-btn" data-group="04">04</button>
    <button class="filter-btn disabled" data-group="05">05</button>
    <button class="filter-btn disabled" data-group="06">06</button>
    <button class="filter-btn disabled" data-group="07">07</button>
    <button class="filter-btn disabled" data-group="08">08</button>
    <button class="filter-btn shuffle-btn" id="shuffleBtn">SHUFFLE</button>
    <button class="filter-btn recent-btn" id="recentBtn">RECENTE ü†µ</button>
    <button class="filter-btn reset-btn" id="resetBtn">RESET</button>
  </div>

  <!-- GALERIA -->
  <div id="gallery" class="gallery-container">
    <div class="col" id="col0"></div>
    <div class="col" id="col1"></div>
    <div class="col" id="col2"></div>
  </div>

  <!-- FEED -->
  <div id="feed">
    <div id="feedContent"></div>
  </div>
</div>

<!-- BARRA SHOPPING (footer) -->
<div class="footer-bar" id="footerBar" role="region" aria-label="Barra de compras">
  <div class="footer-left">
    <div id="backBtn" class="footer-dot" title="Voltar" aria-hidden="true" style="display:none;">
      <!-- simple left arrow -->
      <svg width="18" height="18" viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
    </div>
    <div class="footer-dot" id="cartCountBtn" title="Carrinho" aria-expanded="false" aria-controls="cartPanel">
      üõç <span id="cartCount" style="margin-left:6px">0</span>
    </div>
    <div class="footer-dot" id="rifaCountBtn" title="Rifas" aria-expanded="false" aria-controls="rifaPanel">
      üéü <span id="rifaCount" style="margin-left:6px">0</span>
    </div>
    <div class="footer-dot" id="likesCountBtn" title="Favoritos" aria-expanded="false" aria-controls="likesPanel">
      ‚ô• <span id="likesCount" style="margin-left:6px">0</span>
    </div>
  </div>

  <div class="footer-panels">
    <div class="total-box" id="totalBox">R$ 0,00</div>
    <button class="panel-btn" id="openCartBtn" aria-controls="cartPanel">Carrinho</button>
    <button class="panel-btn" id="openRifaBtn" aria-controls="rifaPanel">Rifa</button>
    <button class="panel-btn" id="openLikesBtn" aria-controls="likesPanel">Favoritos</button>
  </div>
</div>

<!-- expanded panels -->
<div id="cartPanel" class="panel-expanded" aria-hidden="true">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <strong>Carrinho</strong>
    <button id="closeCart">‚úï</button>
  </div>
  <div style="height:12px"></div>
  <div class="mini-list" id="cartList" aria-live="polite"></div>
</div>

<div id="rifaPanel" class="panel-expanded" aria-hidden="true">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <strong>Rifas</strong>
    <button id="closeRifa">Fechar ‚úï</button>
  </div>
  <div style="height:12px"></div>
  <div class="mini-list" id="rifaList"></div>
</div>

<div id="likesPanel" class="panel-expanded" aria-hidden="true">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <strong>Favoritos</strong>
    <button id="closeLikes">Fechar ‚úï</button>
  </div>
  <div style="height:12px"></div>
  <div class="mini-list" id="likesList"></div>
</div>

<script>
/* ========= Dados (exemplo baseado no seu ofertas-iaeu5.txt) =========
   estrutura: pe√ßas identificadas por "XX-YY" e imagens (array)
   NOTE: URLs usam seu padr√£o: https://betshoptv.com/pe√ßas/XX-YYx.jpg
   (a lista usada aqui √© reduzida para demo; substitua/expanda conforme necess√°rio)
   Fonte de refer√™ncia: arquivo enviado. :contentReference[oaicite:2]{index=2}
*/
const fileList = [
  "03-01a.jpg","03-01b.jpg","03-01c.jpg","03-01d.jpg","03-02a.jpg","03-03a.jpg","04-01a.jpg","04-02a.jpg",
  "04-03a.jpg","04-04a.jpg","04-05a.jpg","04-06a.jpg"
];
const basePath="https://betshoptv.com/pe√ßas/";
const pieces = {};
fileList.forEach(fn=>{
  const m = fn.match(/^(\d{2})-(\d{2})([a-z])\.jpg$/i);
  if(!m) return;
  const g=m[1], n=m[2], l=m[3];
  const key=`${g}-${n}`;
  if(!pieces[key]) pieces[key]={group:g,number:n,images:[] , price:150, title:`Pe√ßa ${n}`};
  pieces[key].images.push({letter:l, url: basePath + fn});
});
Object.values(pieces).forEach(p=>p.images.sort((a,b)=>a.letter.localeCompare(b.letter)));

/* ========= Estado ========= */
let cart = [];          // array of keys
let likes = new Set();  // set of keys
let rifas = [];         // array of selected raffle numbers (demo)
let activeGroups = new Set();
let shuffled = false;
let recentDesc = true;

/* ========= Helpers ========= */
function formatMoney(v){ return 'R$ ' + Number(v).toFixed(2).replace('.',','); }
function calcTotal(){
  const subtotal = cart.reduce((s,k)=> s + (pieces[k]?.price||0),0);
  const rifaSubtotal = rifas.length * 10; // demo: cada rifa R$10
  return subtotal + rifaSubtotal;
}

/* ========= Render Gallery ========= */
function renderGallery(){
  document.querySelectorAll('.col').forEach(c=>c.innerHTML='');
  let keys = Object.keys(pieces);
  if(activeGroups.size>0) keys = keys.filter(k=> activeGroups.has(pieces[k].group));
  // sort
  keys.sort((a,b)=>{
    const [ga,na]=a.split('-'); const [gb,nb]=b.split('-');
    if(recentDesc){
      if(gb!==ga) return gb-ga;
      return nb-na;
    }else{
      if(ga!==gb) return ga-gb;
      return na-nb;
    }
  });
  if(shuffled) keys = keys.sort(()=>Math.random()-0.5);
  keys.forEach((key,i)=>{
    const p = pieces[key];
    if(!p || !p.images[0]) return;
    const item = document.createElement('div'); item.className='gallery-item';
    const code = document.createElement('span'); code.className='item-code'; code.innerText=`${p.group}/${p.number}`;
    const img = document.createElement('img'); img.className='gallery-image'; img.src=p.images[0].url; img.alt=`${p.group}/${p.number}`;
    img.loading='lazy';
    // add button area
    const btn = document.createElement('button'); btn.className='add-button'; btn.innerText='üõç ADICIONAR AO CARRINHO';
    btn.onclick = (ev)=>{ ev.stopPropagation(); toggleCartAdd(key); };
    item.onclick = ()=> openFeed(key);
    item.appendChild(code); item.appendChild(img); item.appendChild(btn);
    document.getElementById('col' + (i%3)).appendChild(item);
  });
  updateFooterCounts();
}

/* ========= Feed (post view) ========= */
function openFeed(startKey){
  document.getElementById('gallery').style.display='none';
  document.getElementById('feed').style.display='block';
  // show back button on footer
  document.getElementById('backBtn').style.display='flex';
  const cont = document.getElementById('feedContent'); cont.innerHTML='';
  let keys = Object.keys(pieces);
  if(activeGroups.size>0) keys = keys.filter(k=> activeGroups.has(pieces[k].group));
  keys.sort((a,b)=>{
    const [ga,na]=a.split('-'); const [gb,nb]=b.split('-');
    if(recentDesc){
      if(gb!==ga) return gb-ga;
      return nb-na;
    }else{
      if(ga!==gb) return ga-gb;
      return na-nb;
    }
  });
  if(shuffled) keys = keys.sort(()=>Math.random()-0.5);
  keys.forEach(k=>{
    const p = pieces[k];
    const post = document.createElement('div'); post.className='post';
    // carousel
    const wrap = document.createElement('div'); wrap.className='carousel-wrap';
    const car = document.createElement('div'); car.className='carousel';
    p.images.forEach(imgObj=>{
      const s = document.createElement('div'); s.className='slide';
      const im = document.createElement('img'); im.src = imgObj.url; im.alt = `${k} ${imgObj.letter}`;
      s.appendChild(im); car.appendChild(s);
    });
    wrap.appendChild(car); post.appendChild(wrap);
    // info
    const info = document.createElement('div'); info.className='piece-info';
    const titleRow = document.createElement('div'); titleRow.className='title-row';
    const t = document.createElement('div'); t.className='piece-title'; t.innerText = `${p.group}/${p.number} ${p.title}`;
    const pr = document.createElement('div'); pr.className='piece-price'; pr.innerText = formatMoney(p.price);
    titleRow.appendChild(t); titleRow.appendChild(pr);
    info.appendChild(titleRow);
    const tech = document.createElement('div'); tech.className='piece-tech'; tech.innerText = 'P√°gina da revista Playboy brasileira transferida para EVA estampado e parafusos';
    const dims = document.createElement('div'); dims.className='piece-dims'; dims.innerText = '57 x 18 x 15 cm';
    info.appendChild(tech); info.appendChild(dims);
    post.appendChild(info);
    // actions
    const act = document.createElement('div'); act.className='actions-row';
    const heart = document.createElement('button'); heart.className='btn no-round heart'; heart.innerText = likes.has(k)?'‚ô•':'‚ô°';
    if(likes.has(k)) heart.classList.add('active');
    heart.onclick = (ev)=>{ ev.stopPropagation(); toggleLike(k, heart); };
    const cartbtn = document.createElement('button'); cartbtn.className='btn no-round'; cartbtn.innerText = cart.includes(k)?'REMOVER':'ADICIONAR';
    cartbtn.onclick = (ev)=>{ ev.stopPropagation(); toggleCartAdd(k); cartbtn.innerText = cart.includes(k)?'REMOVER':'ADICIONAR'; };
    act.appendChild(heart); act.appendChild(cartbtn);
    post.appendChild(act);
    cont.appendChild(post);
  });
  // scroll to selected
  const idx = Object.keys(pieces).indexOf(startKey);
  if(idx>=0){
    const posts = document.querySelectorAll('#feedContent .post');
    if(posts[idx]) posts[idx].scrollIntoView({behavior:'auto',block:'start'});
  }
  updateFooterCounts();
}

/* ========= Cart / Likes / Rifa actions ========= */
function toggleCartAdd(key){
  const i = cart.indexOf(key);
  if(i>-1) cart.splice(i,1);
  else cart.push(key);
  updateFooterCounts();
  renderGallery(); // button text updated in feed when opened
}
function toggleLike(key, btn){
  if(likes.has(key)) likes.delete(key);
  else likes.add(key);
  if(btn){
    btn.classList.toggle('active', likes.has(key));
    btn.innerText = likes.has(key)?'‚ô•':'‚ô°';
  }
  updateFooterCounts();
}
function addRifa(number){
  if(!rifas.includes(number)) rifas.push(number);
  updateFooterCounts();
}

/* ========= Footer / Panels ========= */
function updateFooterCounts(){
  document.getElementById('cartCount').innerText = cart.length;
  document.getElementById('likesCount').innerText = likes.size;
  document.getElementById('rifaCount').innerText = rifas.length;
  document.getElementById('totalBox').innerText = formatMoney(calcTotal());

  // refresh panel contents
  const cartList = document.getElementById('cartList'); cartList.innerHTML='';
  cart.forEach(k=>{
    const p = pieces[k];
    const el = document.createElement('div'); el.className='mini-item';
    const img = document.createElement('img'); img.className='mini-thumb'; img.src = (p.images[0] && p.images[0].url) || '';
    const txt = document.createElement('div'); txt.style.fontSize='0.9rem'; txt.innerText = `${p.group}/${p.number} ${p.title}\n${formatMoney(p.price)}`;
    el.appendChild(img); el.appendChild(txt);
    cartList.appendChild(el);
  });

  const likesList = document.getElementById('likesList'); likesList.innerHTML='';
  [...likes].forEach(k=>{
    const p = pieces[k];
    const el = document.createElement('div'); el.className='mini-item';
    const img = document.createElement('img'); img.className='mini-thumb'; img.src = (p.images[0] && p.images[0].url) || '';
    const txt = document.createElement('div'); txt.style.fontSize='0.9rem'; txt.innerText = `${p.group}/${p.number} ${p.title}`;
    el.appendChild(img); el.appendChild(txt);
    likesList.appendChild(el);
  });

  const rifaList = document.getElementById('rifaList'); rifaList.innerHTML='';
  rifas.forEach(n=>{
    const el = document.createElement('div'); el.className='mini-item';
    el.style.padding='10px'; el.innerText = n; rifaList.appendChild(el);
  });
}

/* ========= Panel open/close handlers ========= */
function openPanel(id){
  // close others
  ['cartPanel','rifaPanel','likesPanel'].forEach(pid=>{
    const el = document.getElementById(pid);
    if(pid===id){ el.style.display='block'; el.setAttribute('aria-hidden','false'); }
    else { el.style.display='none'; el.setAttribute('aria-hidden','true'); }
  });
  // mark aria-expanded attributes
  document.getElementById('cartCountBtn').setAttribute('aria-expanded', id==='cartPanel');
  document.getElementById('rifaCountBtn').setAttribute('aria-expanded', id==='rifaPanel');
  document.getElementById('likesCountBtn').setAttribute('aria-expanded', id==='likesPanel');
}
function closePanels(){ openPanel(null); document.getElementById('cartPanel').style.display='none'; document.getElementById('rifaPanel').style.display='none'; document.getElementById('likesPanel').style.display='none'; }

/* ========= UI wiring ========= */
document.getElementById('cartCountBtn').addEventListener('click', ()=>{ const visible = document.getElementById('cartPanel').style.display==='block'; openPanel(visible?null:'cartPanel'); });
document.getElementById('rifaCountBtn').addEventListener('click', ()=>{ const visible = document.getElementById('rifaPanel').style.display==='block'; openPanel(visible?null:'rifaPanel'); });
document.getElementById('likesCountBtn').addEventListener('click', ()=>{ const visible = document.getElementById('likesPanel').style.display==='block'; openPanel(visible?null:'likesPanel'); });
document.getElementById('closeCart').addEventListener('click', ()=>closePanels());
document.getElementById('closeRifa').addEventListener('click', ()=>closePanels());
document.getElementById('closeLikes').addEventListener('click', ()=>closePanels());

/* back button behaviour */
document.getElementById('backBtn').addEventListener('click', ()=>{
  document.getElementById('feed').style.display='none';
  document.getElementById('gallery').style.display='flex';
  document.getElementById('backBtn').style.display='none';
  closePanels();
});

/* filters */
document.getElementById('shuffleBtn').addEventListener('click', ()=>{ shuffled=!shuffled; renderGallery();});
document.getElementById('recentBtn').addEventListener('click', (e)=>{ recentDesc=!recentDesc; e.target.innerText = recentDesc ? 'RECENTE ü†µ' : 'RECENTE ü†∑'; renderGallery();});
document.getElementById('resetBtn').addEventListener('click', ()=>{ activeGroups.clear(); document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active')); renderGallery();});
document.querySelectorAll('.filter-btn').forEach(btn=>{
  if(btn.classList.contains('disabled')) return;
  const g = btn.dataset.group;
  btn.addEventListener('click', ()=>{
    if(activeGroups.has(g)){ activeGroups.delete(g); btn.classList.remove('active'); } else { activeGroups.add(g); btn.classList.add('active'); }
    renderGallery();
  });
});

/* demo: allow adding some rifas (for testing) */
(function addDemoRifas(){
  // create three demo rifa numbers to demonstrate expand
  // in real app you will populate rifas via another UI
  // For testing, add two by default
  rifas.push('X002','X005');
})();

/* === init === */
renderGallery();
updateFooterCounts();
</script>
</body>
</html>
