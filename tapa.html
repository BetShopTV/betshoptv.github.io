<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="icon" href="https://betshoptv.com/FAVICON.png" type="image/x-icon">

<title>BetShopTV‚¶øcom</title>

<!-- ====== STYLES (preserve visual look of v08) ====== -->
<style>
  /* ====== Tokens ====== */
  :root{
    --red:#ff0000; --ink:#2b2424; --beige:#bebab0; --white:#ffffff;
    --bd-thin:1px; --bd-thick:2px;
    --ff-cta:"Roboto Condensed", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
    --ff-body:"Roboto SemiCondensed", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
    --fs-h1:clamp(1.4rem,3vw,2rem); --fs-h2:clamp(1.1rem,2vw,1.4rem);
    --fs-p:clamp(.9rem,1.2vw,1rem); --fs-sm:clamp(.78rem,1vw,.9rem); --fs-menu:clamp(.8rem,1.03vw,1.08rem);
    --gap-xxs:4px; --gap-xs:6px; --gap-s:8px; --gap-m:12px; --gap-l:16px;
    --app-max-width:1200px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--beige);color:var(--ink);font-family:var(--ff-body);-webkit-font-smoothing:antialiased}

  /* ====== Header (mant√©m visual v08) ====== */
  header{position:sticky;top:0;z-index:10;background:var(--red);color:#fff;}
  .hdr-inner{max-width:var(--app-max-width);margin:0 auto;display:flex;align-items:center;gap:12px;padding:10px 16px}
/* PATCH: logo como imagem, mantendo o mesmo ‚Äúpeso visual‚Äù do t√≠tulo anterior */
.logo{
  display:flex; align-items:center; gap:8px;
  text-decoration:none;
}
.logo img{
  display:block;
  height: clamp(88px, 6.9vw, 224px); /* cresce um pouco em telas largas */
  width: auto;
  margin-left: 8px;
}

  .nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
.nav a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: clamp(30px, 5vw, 46px);
  padding: 0 clamp(6px, 2vw, 18px);
  font-weight: 650;
  font-size: clamp(12px, 2vw, 18px);
  color: #ff0000;
  background: white;
  text-decoration: none;
  letter-spacing: 0.24px;
}

  .nav a:hover{
  background: #bebab0;     /* bege ativo */
  color: #2b2424;          /* texto escuro */
  border-color: #bebab0;   /* borda bege pra integrar */
  }
  .nav a.active {
background:#ff0000;color:white;border: 1px solid white;
}

  /* ====== √Årea da p√°gina ====== */
  main#app{max-width:var(--app-max-width);margin:20px auto;padding:0 6px;min-height:60vh}
  section{margin-bottom:24px}
  h2{font:700 var(--fs-h2)/1.2 var(--ff-cta);margin:0 0 8px}
  .botao-txt a{display:inline-flex;align-items:center;justify-content:center;color:#ffffff;text-decoration:none;
padding: clamp(8px, 3.8vw, 38px) clamp(12px, 3vw, 27px);
height: clamp(48px, 7vh, 72px);
font-weight: 700;
font-size: clamp(27px, 6.9vw, 42px);
letter-spacing: clamp(1.3px, 0.42vw, 2.4px); 
text-transform:uppercase; 
background-color: #ff0000;
  background-image: url('https://betshoptv.com/images/faposteee.gif');
  background-repeat: repeat;
  }
  .botao-txt a:hover{
  background: #2b2424;     /* bege ativo */
  color: white;          /* texto escuro */
  border-color: #2b2424;   /* borda bege pra integrar */
  }
  /* ====== Galeria (Masonry / Pinterest) ====== */
  .galeria{
    column-gap:2px; -webkit-column-gap:2px;
    column-count:3; -webkit-column-count:3; /* 3 colunas por padr√£o */
    margin:0; padding:0;
  }
  .gal-item{
    display:inline-block; width:100%;
    margin:0 0 0px;
    break-inside:avoid; -webkit-column-break-inside:avoid;
    background:transparent; overflow:hidden;
  }
  .gal-item img{display:block;width:100%;height:auto;object-fit:cover;vertical-align:middle;background:transparent}
  .gal-item .ttl{display:none!important}

  /* VENDIDA ‚Äî realce discreto */
/* Estado "vendido" */
.gal-item.sold {
  position: relative;
  filter: saturate(0.88) brightness(0.94);
  opacity: 1;
}

.gal-item.sold::after {
  content: '‚¨§';
  position: absolute;
  top: 1.5vw;
  right: 1.5vw;
  color: var(--red);
  font-size: clamp(18px, 2.4vw, 27px);
  line-height: 1;
  
  /* üî• Isola o pseudo do filtro */
  filter: none;
  mix-blend-mode: normal;
  isolation: isolate;
}
.preco.sold { color: var(--red); }



  /* ====== Feed / Post ====== */
  .feed{display:flex;flex-direction:column;gap:var(--gap-s)}
  .post{border:var(--bd-thin) solid var(--ink);background:var(--beige);overflow:hidden;display:flex;flex-direction:column;}

  /* Carrossel */
  .carousel{
    display:flex;gap:var(--gap-xxs);
    overflow-x:auto;scroll-snap-type:x mandatory;
    padding:6px 12px;background:var(--beige);
    /* barra de rolagem inferior sempre vis√≠vel e vermelha */
    scrollbar-color: var(--red) transparent;
  }
  .carousel::-webkit-scrollbar{height:8px; margin-top: 8px;border-radius:0;}
  .carousel::-webkit-scrollbar-track{background:var(--beige);border-radius:0;}
  .carousel::-webkit-scrollbar-thumb{background:var(--red)}
  .carousel-slide{flex:0 0 100%;display:flex;align-items:center;justify-content:center;scroll-snap-align:center;background:var(--beige);}
  .carousel-slide img{
    width:100%; max-height:42vh; min-height:200px;
    object-fit:contain; background:var(--beige);
  }
  /* remove a barra de progresso antiga */
  .carousel-bar-wrap{display:none!important}

  /* Meta do post */
  .meta{padding:10px;display:flex;flex-direction:column;gap:8px;background:var(--beige);}
  .meta .linha1{display:flex;align-items:flex-start;gap:8px;background:var(--beige);}
  .titulo{flex:1 1 auto;font-family:var(--ff-cta);font-weight:700;min-width:0;background:var(--beige);}
  .preco{flex:0 0 auto;font-weight:700;white-space:nowrap;align-self:flex-start;background:var(--beige);}
  .descricao{font-size:15px; font-weight: 700;color:var(--ink);background:var(--beige);}
  .tecnica{font-size:13px;color:var(--ink);background:var(--beige);}   /* ser√° exibida acima das dimens√µes */
  .dimens{font-size:13px;color:var(--ink);background:var(--beige);}

  /* Bot√µes do post */
  .meta .meta-footer{display:flex;justify-content:flex-end;gap:8px}
  .btn{font-size:13px;font-family:var(--ff-cta);font-weight:700;padding:8px 12px;cursor:pointer;border-radius:0}
  .add-btn{font-size:13px;border:2px solid var(--red);background:transparent;color:var(--red)}
  .add-btn.added{font-size:13px;border-color:var(--ink);background:var(--ink);color:var(--beige)}
  .fav-btn{font-size:13px; border:2px solid var(--red);background:var(--beige);color:var(--red)} 
  .fav-btn.active{font-size:13px;border:2px solid var(--red);background:var(--red);color:var(--beige)}
 
  /* ====== Rifas ====== */
  @font-face{
    font-family:'BC-RobotoCondensed-Med';
    src:url('/fonts/Roboto_Condensed-Medium.woff2') format('woff2');
    font-weight:500;font-style:normal;font-display:swap;
  }
  .rifas{
    display:flex;flex-wrap:wrap;gap:8px;
    align-items:flex-start;justify-content:center;align-content:center;
    padding:6px 0;
  }
  .rifa-btn{
    display:inline-flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:2px;
    min-height:56px;padding:10px 12px;border:1px solid var(--ink);
    background:var(--beige);cursor:pointer;
    font-family:'BC-RobotoCondensed-Med',system-ui,-apple-system,'Segoe UI',Arial,sans-serif;
    font-weight:500;font-size:14px;line-height:1.15;text-transform:none;color:inherit;white-space:normal;overflow:hidden;
  }
  .rifa-btn .ln1,.rifa-btn .ln2{
    display:block;margin:0;padding:0;font:inherit;text-transform:none;text-align:left;color:inherit;
  }
  .rifa-btn.selected{background:#fff!important;border-color:var(--red)!important;color:var(--red)!important}
  .rifa-btn.sold{opacity:.08;filter:grayscale(1);pointer-events:none; background: #bebab0; color:#fff; border: 0px;}

  @media (max-width:768px){
    .rifa-btn{min-height:42px;padding:5px 7px;font-size:11px}
    .rifa-btn .ln1,.rifa-btn .ln2{font-size:11px;line-height:1.12}
    .galeria{column-count:3; -webkit-column-count:3} /* 4 colunas telas largas */
  }

  /* ====== Footer (mant√©m visual v08) ====== */
  
    @font-face{
    font-family:'BC-RobotoCondensed-Bold';
    src:url('/fonts/Roboto_Condensed-Bold.woff2') format('woff2');
    font-weight:900;font-style:normal;font-display:swap;
  }
  
  footer{position:sticky;bottom:-2px;background:var(--ink);color:#fff;border-top:var(--bd-thick) solid var(--ink)}
  .ftr-inner{max-width:var(--app-max-width);margin:0 auto;display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 16px}
  .contadores{display:flex;gap:8px;flex-wrap:wrap}
  .pill{background:var(--beige);color:var(--ink);border:var(--bd-thin) solid var(--beige);padding:4px 4px;font:700 var(--fs-sm)/1 var(--ff-cta)}
  .cta-final{background:var(--red);color:#fff;border:var(--bd-thin) solid #fff;padding:8px 12px;font-size: 1em;font-family:'BC-RobotoCondensed-Bold',system-ui,-apple-system,'Segoe UI',Arial,sans-serif;cursor:pointer}
  .total-display{font-size: 1em;font-family:'BC-RobotoCondensed-Bold',system-ui,-apple-system,'Segoe UI',Arial,sans-serif; margin-left:12px}
  /* Estado visual do rodap√© quando N√ÉO h√° sele√ß√£o (total = 0) */
footer.no-total #pillCompact,
footer.no-total #ctaMain {
  background: var(--ink);
  color: var(--ink);
  border: 0;              /* sem borda colorida */
}

/* Estado visual do CTA quando H√Å sele√ß√£o (total > 0) */
footer.has-total #ctaMain {
  background: var(--red);
  color: #fff;
  border: 0;              /* sem borda */
  padding: 8px 12px;
  margin-top:12px;
  margin-bottom:12px;
  margin-right: 4px;
  font-family:'BC-RobotoCondensed-Bold',system-ui,-apple-system,'Segoe UI',Arial,sans-serif;
  font-size: 1em;
}

/* Garantias de intera√ß√£o */
#ctaMain[disabled] {
  cursor: default;
  opacity: 0;             /* mantemos leg√≠vel mesmo desabilitado */
}

/* ===== RIFAS: hero/topo informativo ===== */
.rifa-hero{
  border: var(--bd-thin) solid var(--ink);
  background: #d2cec5;               /* tom acima do beige mantendo paleta */
  padding: 16px;
  margin: 0 0 16px 0;
  position: relative;
  align-items: center;
}
.rifa-hero .badge{
  display:inline-block;
  background: var(--red);
  color:#fff;
  font:700 var(--fs-sm)/1 var(--ff-cta);
  padding:6px 10px;
  border: var(--bd-thin) solid var(--ink);
  position:absolute;
  top:-12px; left:16px;
}
.rifa-hero h2{
  margin: 14px 0 2px 0;
  font:700 var(--fs-h2)/1.1 var(--ff-cta);
}
.rifa-hero .sub{
  display:block;
  font:700 var(--fs-h2)/1 var(--ff-cta);
  letter-spacing:.02em;
  margin-bottom:10px;
}
.rifa-hero .desc{
  margin:10px 0 8px 0;
  font-size: var(--fs-p);
}
.rifa-hero .spec{
  margin:0 0 10px 0;
  font-size: var(--fs-p);
}
.rifa-hero .precos{
  margin: 4px 0 4px 0;
  display:flex; gap:8px; flex-wrap:wrap;
}
.rifa-hero .pill{
  background:var(--beige);
  color:var(--ink);
  border: var(--bd-thin) solid var(--ink);
  padding:10px 15px;
    font:500 calc(var(--fs-h2) * 0.9) / 1.1 var(--ff-cta);
}
.rifa-hero .hint{
  margin:10px 0 8px 0;
  font-size: var(--fs-p);
}
.rifa-hero .strong{ font-weight:700; }
.rifa-hero .cta-hint{
  margin-top: 8px;
  font:700 var(--fs-sm)/1 var(--ff-cta);
}
/* Centraliza verticalmente o texto do topo das rifas */
.rifa-hero {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  text-align: center;
  max-width: 720px;
  margin: 20px auto 32px auto; /* centraliza no eixo horizontal e d√° espa√ßamento */
  padding: 24px 16px;
}

.rifa-hero .badge {
  position: relative;
  top: 0;
  left: 0;
  margin-bottom: 12px;
}

.rifa-hero h2,
.rifa-hero .desc,
.rifa-hero .spec,
.rifa-hero .cta-hint {
  text-align: center;
  max-width: 90%;
}
@media (max-width: 600px) {
  .rifa-hero {
    padding: 20px 12px;
    margin-top: 8px;
  }
}

  /* Remove a moldura autom√°tica quando o navegador foca o elemento com hash (#id) */
:target {
  outline: none;
}
:target * {
  outline: none !important;
}

/* Ajusta o posicionamento da √¢ncora no feed, respeitando o cabe√ßalho fixo */
.feed-item {
  scroll-margin-top: 110px; /* altura aproximada do header vermelho */
  margin-top: 4px;
}

@media (max-width: 600px) {
  .feed-item {
    scroll-margin-top: 82px;
    margin-top: 4px;
  }
}

      a {
      color: #ff0000;
      text-decoration: underline;
    }

    a:hover {
      text-decoration: none;
    }
  
  
/* ====== FOFILTROS (barra compacta) ====== */
.filters-bar{
  display:flex;
  flex-direction:column;        /* 2 linhas no mobile-first */
  gap:8px;
  padding:6px 0;
}

/* linha 1 e linha 2 */
.filters-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px 12px;
  align-items:stretch;
  justify-content:flex-start;
}

/* blocos de cada controle */
.filters-group{
  display:flex;
  align-items:stretch;
  gap:6px;
}

/* r√≥tulos (ex.: Grupos, Pe√ßas, Pre√ßo, Ordenar) */
.filters-label{
  font:700 var(--fs-sm)/1 var(--ff-cta);
  color:var(--ink);
  align-self:center;
  white-space:nowrap;
}

/* bot√µes tipo "chip" (sem borda arredondada) */
.chip{
  appearance:none;
  border:1px solid var(--ink);
  background:var(--beige);   /* vazio */
  color:var(--ink);          /* vazio */
  font:700 calc(var(--fs-sm) * .95)/1 var(--ff-cta); /* menor que header */
  padding:.38rem .60rem;
  border-radius:0;           /* <-- sem arredondamento */
  cursor:pointer;
  display:inline-flex;       /* centraliza√ß√£o de texto */
  align-items:center;        /* vertical center */
  justify-content:center;    /* horizontal center */
  text-align:center;
  min-height:36px;           /* garante centro vertical */
  white-space:nowrap;
}

/* estado selecionado */
.chip[aria-pressed="true"],
.chip.is-active{
  background:var(--ink);     /* #2b2424 */
  border-color:var(--ink);
  color:var(--beige);        /* #bebab0 */
}

/* selects (PRE√áO e ORDENAR) ‚Äì alinhados √† esquerda */
.select{
  border:1px solid var(--ink);
  background:var(--beige);
  color:var(--ink);
  font:700 calc(var(--fs-sm) * .95)/1 var(--ff-cta);
  padding:.18rem .55rem;
  border-radius:0;           /* <-- sem arredondamento */
  min-height:36px;
}

/* RESPONSIVO: em telas maiores mant√©m 2 linhas, mas sem overflow horizontal */
@media (min-width: 920px){
  .filters-row{ gap:10px 16px; }
  .nav a {
  font-weight: 700;}
}


  /* ===== PATCH FOFILTROS ===== */

/* 1) Centraliza√ß√£o e layout responsivo
   - Mobile-first: empilha (coluna)
   - >=1024px: tenta virar 1 linha (row + wrap)
*/
.filters-bar{
  /* j√° existia, refor√ßamos: */
  max-width: var(--app-max-width);
  margin: 0 auto;
  display: flex;
  flex-direction: column;   /* mobile */
  gap: 18px;
  padding: 2.4vh 0;
  align-items: center;      /* centraliza todo o bloco */
}

.filters-row{
  display: flex;
  flex-wrap: wrap;
  gap: 6px 18px;
  align-items: stretch;
  justify-content: center;  /* centraliza os itens de cada linha */
}

/* Em telas largas, as duas "linhas" viram irm√£s lado a lado e tentam ficar em 1 linha */
@media (min-width: 1024px){
  .filters-bar{
    flex-direction: row;    /* row1 e row2 lado a lado */
    flex-wrap: wrap;
    justify-content: center;
  }
  .filters-row{
    flex: 0 1 auto;
    flex-wrap: wrap;
    justify-content: center;
  }
}

/* 2) Altura mais baixa dos bot√µes com borda (chips) e dos selects */
.chip{
  /* tamanho mais enxuto */
  font: 700 calc(var(--fs-sm) * .90)/1 var(--ff-cta);
  padding: .26rem .50rem;     /* menos vertical */
  min-height: 30px;           /* de 36px -> 30px */
}
.select{
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  font: 700 calc(var(--fs-sm) * .90)/1 var(--ff-cta);
  padding: .22rem .50rem;     /* menos vertical */ 
  min-height: 30px;           /* de 36px -> 30px */
  line-height: 1.1;
}

/* 3) Remover ‚Äúborda branca‚Äù/realce do select ao focar/clicar (todos os navegadores) */
.select:focus,
.select:focus-visible,
.select:-moz-focusring {
  outline: none !important;
  box-shadow: none !important;
  border-color: var(--ink) !important;
}

/* (Safari/WebKit) bloqueia halo azul no focus via mouse */
.select:focus:not(:focus-visible){
  outline: none !important;
  box-shadow: none !important;
}

/* 4) Borda do select/inputs nunca arredondada (refor√ßo) */
.select{ border-radius: 0 !important; }

/* 5) Ajuste fino de gap em telas bem largas (opcional) */
@media (min-width: 1280px){
      .nav a {
  font-weight: 800;
  letter-spacing: 0.66px;
    }
    .filters-row{ gap: 8px 12px; }
}
/* === FOFILTROS: 1 linha no desktop, quebra fluida no mobile === */
.filters-bar{
  max-width: var(--app-max-width);
  margin: 0 auto;
  display: flex;
  flex-direction: row;   /* desktop: 1 linha */
  flex-wrap: wrap;       /* quebra quando precisar */
  justify-content: center;
  gap: 10px 14px;
  padding: 10px 0;
}
.filters-row--all{
  display: contents;     /* os grupos "fluem" direto na barra */
}
.filters-group{
  display: inline-flex;
  align-items: stretch;
  flex-wrap: wrap;
  gap: 6px;
}

/* Altura enxuta (mantemos como voc√™ pediu) */
.chip{
  font: 700 calc(var(--fs-sm) * .90)/1 var(--ff-cta);
  padding: .26rem .50rem;
  min-height: 30px;
} 
.select{
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  font: 700 calc(var(--fs-sm) * .90)/1 var(--ff-cta);
  padding: .22rem .50rem;
  min-height: 30px;
  line-height: 1.1;
  border-radius: 0;
}

/* Remove halo/borda branca ao focar no select (todos os browsers) */
.select:focus,
.select:focus-visible,
.select:-moz-focusring{
  outline: none !important;
  box-shadow: none !important;
  border-color: var(--ink) !important;
}
/* Safari: foco via mouse n√£o pinta nada */
.select:focus:not(:focus-visible){
  outline: none !important;
  box-shadow: none !important;
}


/* === FEED ‚Äì Desktop: carrossel em faixa horizontal === */
@media (min-width: 1024px){
  /* faixa com rolagem horizontal e espa√ßamento fixo */
  .post .carousel{
    gap: 24px !important;                /* espa√ßo entre imagens */
    scroll-snap-type: none;     /* mant√©m "grudinho" suave */
    padding: 12px 16px 16px;             /* um respiro embaixo da barra */
    overflow-x: auto;                    /* garante a barra horizontal */
  }

  /* cada slide s√≥ o tamanho do conte√∫do (lado a lado) */
  .post .carousel-slide{
    flex: 0 0 auto !important;           /* N√ÉO ocupa 100% da largura */
    scroll-snap-align: none;             /* encaixa no in√≠cio a cada arrasto */
  }

  /* imagem totalmente vis√≠vel; 10% mais alta que hoje */
  .post .carousel-slide img{
    width: auto !important;              /* n√£o esticar a 100% da faixa */
    height: auto;
    max-height: calc(42vh * 1.1);        /* +10% de altura no desktop */
    object-fit: contain;                  /* tudo vis√≠vel dentro da faixa */
    display: block;
  }
}

.modal-content {
  margin-bottom: 8vw; 
  background: var(--beige);
  color: var(--ink);
  padding: 38px 28px;
  border: 2px solid var(--ink);
  max-width: 88vw;
  width: 690px;
  font-size: 1rem;
  text-align: center;
  position: relative;
  max-height: 69vh;
  overflow-y: auto;
  scroll-behavior: smooth;
}

/* Scrollbar vertical no modal */
.modal-content::-webkit-scrollbar {
  width: 8px;
  border-radius: 0;
}

.modal-content::-webkit-scrollbar-track {
  background: var(--beige);
  border-radius: 0;
}

.modal-content::-webkit-scrollbar-thumb {
  background: var(--red);
}

.modal-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(43, 36, 36, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999; /* ‚ö†Ô∏è aqui aumentei para garantir que fique no topo */
}

.modal-close {
  position: absolute;
  top: 6px;
  right: 4px;
  background: none;
  border: none;
  font-size: 1rem;
 font-family: "Roboto SemiCondensed", var(--ff-body), sans-serif;
  font-weight: 900;
  color: var(--white);
  cursor: pointer;
}

/* Mobile-first: abaixo de 760px, a barra pode virar 2‚Äì3 linhas naturalmente */
@media (max-width: 760px){

  .modal-content {
  padding: 38px 18px;
  max-width: 80vw;
  max-height: 63vh;
}

  .filters-bar{ justify-content: center; gap: 8px 10px; }
}

/* Offset da √¢ncora para n√£o esconder sob o cabe√ßalho fixo (exceto feed) */
app[id]:not(#feed),
section[id]:not(#feed),
template[id]:not(#feed),
div[id]:not(#feed) {
  scroll-margin-top: 0px;
}
  
  
</style>

</head>
<body>
  <!-- ========== HEADER (kept same as v08) ========== -->
  <header>
    <div class="hdr-inner">
      <a class="logo" href="#home" aria-label="BetShopTV ‚Äì p√°gina inicial">
  <img src="https://betshoptv.com/elementos/logo-bstv.png" alt="BetShopTV" loading="eager" />
</a>
      <nav class="nav">
      <a href="#rifas">RIFAS</a>
        <a href="#galeria">GALERIA de OFERTAS</a>
        
<a href="#como">COMO FUNCIONA?</a>
         <a href="#sobre">SOBRE N√ìS</a>
 
      </nav>
    </div>
  </header>

  <!-- ========== MOUNT POINT: only this container is mutated by JS ========== -->
  <!-- ========== MOUNT POINT: only this container is mutated by JS ========== -->
<main id="app" role="main" aria-live="polite">
  <!-- initial content: will be replaced by renderers -->
  <section id="page-loading" style="padding:24px;text-align:center;">Carregando.</section>
</main>

<!-- ========== TEMPLATES (FORA do #app!) ========== -->

<!-- ========== TEMPLATE: SOBRE O PROJETO ========== -->

<template id="page-sobre">
<!-- üåü PARTE 1: Cabe√ßalho -->
<center>
  <h2 class="titulo-sobre" STYLE="color: red">
    <span class="linha1">Ol√°! Somos a <strong>BetShopTV.com</strong>:</span>
    <span class="linha2">um canal de apostas e</span>
    <span class="linha3">circula√ß√£o de valores.</span>
  </h2>
</center>

<style>
  .titulo-sobre {
    font-size: clamp(25px, 3.7vw, 37px);
    margin-bottom: clamp(8px, 3.8vw, 38px);
    margin-top: 2.4vw;
    color: white;
    font-weight: 400;
    line-height: 1.45;
    text-align: center;
    padding: 4px 12px;
  }

  .titulo-sobre span {
    display: inline-block;
    white-space: nowrap;
  }

  /* üîπ Estado 1: tudo em uma linha (desktop) */
  .titulo-sobre .linha1::after,
  .titulo-sobre .linha2::after {
    content: " ";
  }

  /* üî∏ Estado 2: quebra ap√≥s a primeira linha */
  @media (max-width: 920px) {
    .titulo-sobre .linha1::after {
      content: "\A";
      white-space: pre;
    }
    .titulo-sobre .linha2::after {
      content: " ";
    }
  }

  /* üîª Estado 3: quebra ap√≥s linha 1 e 2 */
  @media (max-width: 540px) {
    .titulo-sobre .linha1::after {
      content: "\A";
      white-space: pre;
    }
    .titulo-sobre .linha2::after {
      content: "\A";
      white-space: pre;
    }
  }
</style>

<!-- üèõÔ∏è PARTE 2: TEXTO + V√çDEO -->
<section
  style="
    max-width: 1200px;
    margin: 20 auto;
    padding: 20px 28px;
    background: var(--red);
    color: var(--beige);
    font-size: clamp(15px, 2vw, 17px);
    line-height: clamp(1.4, 4.5vw, 1.55);
    letter-spacing: clamp(0.2px, 0.5vw, 0.35px);
    margin-right:clamp(0px, 1.4vw, 28px);
    margin-left:clamp(0px, 1.4vw,    28px);
  "
>
  <div class="bloco-expo">
    <div class="texto-expo">
      <h2 style="margin-top: 2px;">Estamos em exposi√ß√£o at√© o dia 15 de novembro, quando acontecem os sorteios finais!</h2>
      <h2
        style="
          margin: 0;
          font-size: clamp(16px, 3.5vw, 21px);
          line-height: 1.4;
        "
      >
        <br><a href="https://www.instagram.com/saturna_estudio/" target="_blank">SATURNA EST√öDIO</a>
      </h2>

      <p style="margin-top: 4px; margin-bottom: 4px; line-height: 1.45;">
        Rua Lopes de Oliveira, 166 <br />Barra Funda, S√£o Paulo
      </p>
      
      <p style="margin-top: 10px; margin-bottom: 24px; line-height: 1.45;">
        <strong>Sexta e S√°bado, das 16h √†s 22h</strong><br />
        ou
        <a onclick="abrirModal(this)" data-modal-id="agende-visita">
            agende sua visita</a>!
      </p><br>

      

      
<a onclick="abrirModal(this)" data-modal-id="fave-checkout">üí°</a>
<a onclick="abrirModal(this)" data-modal-id="saiba-mais"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 38px; width: 38px;"><defs><radialGradient id="zeromancer-heart-plus-gradient-2"><stop offset="0%" stop-color="#000" stop-opacity="1"></stop><stop offset="100%" stop-color="#e20303" stop-opacity="1"></stop></radialGradient></defs><path d="M0 0h512v512H0z" fill="#000" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M372.48 31.215c-77.65 0-116.48 65.73-116.48 65.73s-38.83-65.72-116.48-65.72c-37.14 0-107.77 33.72-107.77 125.13 0 161.24 224.25 324.43 224.25 324.43s224.25-163.19 224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492 115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z" fill="#bebab0" transform="translate(0, 0) scale(1, 1) rotate(-360, 256, 256) skewX(0) skewY(0)" fill-opacity="1" stroke-width="8" stroke="#2b2424" stroke-opacity="1"></path></g></svg></a>



      
    </div>





<div id="modal-saiba-mais" class="modal-overlay" style="display: none;">
  <div class="modal-content">

    <button class="modal-close" onclick="fecharModal()">‚úï</button>

    <h2 style="margin: 0 0 12px 0; font-family: var(--ff-cta); font-size: var(--fs-h2); line-height: 1.2;">
      SAIBA TUDO E MAIS UM POUCO
    </h2>

    <!-- üî¥ Se√ß√£o 1 -->
    <div style="background: var(--red); color: var(--beige); padding: 12px 16px; margin-bottom: 16px;">
      <p style="margin: 0; font-size: var(--fs-p); font-weight: 700;">
        BetShopTV.com √© mais do que uma galeria. √â uma engrenagem de circula√ß√£o de valores entre arte, sorte e comunidade.
      </p>
    </div>

    <!-- üü§ Se√ß√£o 2: Como participar -->
    <h3 style="margin-bottom: 8px; font-size: var(--fs-h2); font-family: var(--ff-cta);">COMO PARTICIPAR</h3>

    <ul style="list-style: disc; padding-left: 24px; margin-bottom: 16px; text-align: left; font-size: var(--fs-p);">
      <li><strong>Apostando nas rifas</strong> ‚Äî concorra a v√°rias pe√ßas √∫nicas por valores baixos</li>
      <li><strong>Comprando direto na galeria</strong> ‚Äî garanta sua pe√ßa antes do sorteio final</li>
    </ul>

    <!-- üîò Se√ß√£o 3: Entenda o funcionamento -->
    <div style="border: 1px solid var(--ink); padding: 10px 14px; margin-bottom: 16px; background: var(--beige); font-size: var(--fs-p);">
      <p><strong>Quanto mais voc√™ interage, mais suas chances aumentam.</strong> Marcar favoritas, apostar cedo e escolher bem seu n√∫mero pode mudar tudo.</p>
      <p>Voc√™ participa do sorteio com base em: n√∫mero sorteado, momento da aposta e quantidade de favoritas marcadas.</p>
    </div>

    <!-- üßÆ Se√ß√£o 4: Exemplo de c√°lculo -->
    <div style="background: white; border: 1px solid var(--ink); padding: 12px; margin-bottom: 18px; text-align: left;">
      <h4 style="margin-top: 0; font-size: var(--fs-sm); font-weight: bold; color: var(--red); text-transform: uppercase;">Exemplo pr√°tico:</h4>
      <ul style="padding-left: 18px; font-size: var(--fs-p);">
        <li>Voc√™ aposta R$ 50 ‚Üí recebe 2 n√∫meros</li>
        <li>Marca 3 favoritas no feed</li>
        <li>No sorteio, uma das suas apostas √© sorteada</li>
        <li>Voc√™ leva uma das pe√ßas que escolheu üéØ</li>
      </ul>
    </div>

    <!-- üí° Dica -->
    <p style="font-style: italic; font-size: var(--fs-sm); margin-bottom: 24px;">
      Dica: quanto antes apostar, mais alta sua posi√ß√£o. E isso importa na ordem de escolha!
    </p>

    <!-- üì¶ Se√ß√£o 5: Transpar√™ncia -->
    <h3 style="font-family: var(--ff-cta); font-size: var(--fs-h2); margin-bottom: 6px;">O QUE APOSTAMOS COM VOC√ä</h3>
    <p style="font-size: var(--fs-p); margin-bottom: 12px;">
      O BetShopTV funciona sem intermedia√ß√£o. Todo o processo √© transparente e direto:
    </p>

    <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">
      <button class="chip is-active">Pagamento via PIX</button>
      <button class="chip">Sem apps externos</button>
      <button class="chip">Envios com certificado</button>
      <button class="chip">Distribui√ß√£o ao vivo</button>
    </div>

    <!-- üß† Pol√≠tica -->
    <div style="background: var(--red); color: white; padding: 16px; font-size: var(--fs-sm); line-height: 1.4;">
      <strong>Nosso princ√≠pio:</strong><br>
      <em>equilibrar ganhos e apoios entre quem aposta e quem produz</em>. Essa calibragem garante m√∫ltiplas formas de acesso e retorno.
    </div>

    <!-- ‚úÖ Final -->
    <div style="margin-top: 24px; text-align: center;">
      <p style="font-weight: bold; font-size: var(--fs-h2); color: var(--red);">
        BetShopTV.com
      </p>
      <p style="font-size: var(--fs-sm); text-transform: uppercase; letter-spacing: 1px;">
        Pe√ßas √∫nicas, chances m√∫ltiplas
      </p>
    </div>
  </div>
</div>







<div class="video-expo">
  <video
    autoplay
    loop
    muted
    playsinline
    preload="auto"
    width="100%"
    style="cursor: pointer; display: block; border: clamp(2px, 1vw,     10px)   solid #bebab0;"
    onclick="this.paused ? this.play() : this.pause();"
   
  >
    <source src="https://betshoptv.com/elementos/expo2.mp4" type="video/mp4" />
    <source src="https://betshoptv.com/elementos/expo2.webm" type="video/webm" />
    Seu navegador n√£o suporta v√≠deo HTML5.
  </video>
</div>

<style>
  /* üñ•Ô∏è Desktop normal, nada muda */
  .video-expo {
    margin-bottom: 0;
  }

  .video-expo video {
    display: block;
    margin: 0;
    padding: 0;
    line-height: 0;
  }

  /* üì± Mobile: sobe o v√≠deo conforme a largura da tela */
  @media (max-width: 900px) {
    .video-expo {
      margin-bottom: clamp(-24px, -8vw, -50px); /* üî• sobe suavemente em telas menores */
    }
  }

  @media (max-width: 540px) {
    .video-expo {
      margin-bottom: clamp(-100px, -37vw, -888px); /* üî• sobe mais em celulares pequenos */
      margin-top: -27px;
    }
  }
  
    @media (max-width: 480px) {
    .video-expo {
      margin-bottom: clamp(-142px, -38vw, -888px); /* üî• sobe mais em celulares pequenos */
    }
  }
  
      @media (max-width: 379px) {
    .video-expo {
      margin-bottom: clamp(-188px, -42vw, -888px); /* üî• sobe mais em celulares pequenos */
    }
  }
</style>

  </div>

  <style>
    /* üîß Layout desktop e mobile do bloco da exposi√ß√£o */
    .bloco-expo {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      gap: 28px;
      max-width: 1000px;
      margin: 0 auto 24px auto;
      color: white;
      margin-top: clamp(8px, 3.8vw, 38px);
    }

    .bloco-expo .texto-expo {
      flex: 1 1 88%;
      max-width: 420px;
      text-align: left;
      font-size: clamp(15px, 2vw, 17px);
      line-height: 1.5;
    }

    .bloco-expo .video-expo {
      flex: 1 1 400px;
      max-width: 480px;
      display: block;
    }

    /* Responsivo: mobile (volta ao layout empilhado) */
    @media (max-width: 720px) {
      .bloco-expo {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .bloco-expo .texto-expo {
        max-width: 100%;
        text-align: center;
      }
    }

    section a {
      color: white !important;
      text-decoration: underline;
    }

    section a:hover {
      color: white !important;
      text-decoration: none;
    }
  </style>
</section>




<!-- üìñ PARTE 4: TEXTO INFORMATIVO ABAIXO DO PAINEL -->
<center>
  <div
    style="
      text-align: left;
      display: inline-block;
      width: 100%;
      max-width: 937px;
      box-sizing: border-box;
      padding-left: clamp(13px, 4vw, 38px);
      padding-right: clamp(13px, 4vw, 38px);
      background: white;
      color: #2b2424;
      border: 1px solid #2b2424;
    "
  >
      
      
<style>
  /* üß© Fonte personalizada: Roboto Black via WOFF2 */
  @font-face {
    font-family: "RobotoBlackCustom";
    src: url("https://betshoptv.com/fonts/Roboto-Black.woff2") format("woff2");
    font-weight: 900;
    font-style: normal;
    font-display: swap;
  }

  /* üéØ Aplica especificamente no texto ‚ÄúAPOSTE AQUI‚Äù */
  .botao-txt strong {
    font-size: 1.42em;
    font-family: "RobotoBlackCustom", "Roboto", sans-serif !important;
    font-weight: 900 !important;
    letter-spacing: 3px;
    text-transform: uppercase;
  /* üé® Borda do texto */
-webkit-text-stroke: 4px #2b2424;
-webkit-text-fill-color: #bebab0;
  color: #2b2424; /* fallback */

  /* melhora o rendering da borda */
  paint-order: stroke fill;
}
}
  }
</style>

<center>
  <div
    style="
      background-color: #bebab0;
      background-image: 
        url('https://betshoptv.com/images/BGINDEX2.gif'),
        url('https://betshoptv.com/images/BGO-big.gif');
      background-repeat: repeat, repeat, repeat;
      background-position: center, center, center;
      background-size: auto, auto, auto;
      padding: 8px clamp(16px, 5vw, 40px);
      box-sizing: border-box;
      margin-top: clamp(8px, 2vw, 20px);
      border: 1px solid #2b2424;
    "
    class="botao-txt"
  >
    <p
      style="
        font-size: clamp(24px, 6.9vw, 38px);
        margin-bottom: -2px;
        color: var(--ink);
        margin-top: 18px;
      "
    >
      <strong style="-webkit-text-stroke: 5px #2b2424;">APOSTE AQUI</strong>
    </p>

    <div
      style="
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 10px;
        flex-wrap: nowrap;
      "
    >
      <a href="#rifas">RIFAS</a>
      <a href="#galeria">OFERTAS</a>
    </div>
    <br />
  </div>
</center>


<style>
  /* Bot√µes RIFAS e OFERTAS sempre na mesma linha */
  .botao-txt div a {
    white-space: nowrap;
  }

 /* üì± Gambiarra controlada: sobe o bloco no mobile */
  @media (max-width: 720px) {
    .botao-txt {
      margin-top: 10px !important;
    }

    .gambi {
      position: relative;
      top: -22px; /* üîß Ajuste fino ‚Äî pode subir mais ou menos (ex: -18px, -25px) */
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
  }
</style>
      
      
      
      
      
      <span style="font-weight: 500;" class="link-fundo-branco">
    <br>
    <p>
      Funciona assim: quem participa da <a href="#rifas">RIFA</a> pode ganhar at√©
      <strong>tr√™s das 100 pe√ßas</strong> do pol√≠ptico
      <em>Chop Shop AV</em>.
    </p>

    <p>
      No dia <strong>15 de novembro</strong>, durante o encerramento da
      exposi√ß√£o na
      <a href="https://www.instagram.com/saturna_estudio/" target="_blank">Saturna</a>,
      ser√£o sorteadas <strong>ao menos 17 pessoas</strong> para dividir as pe√ßas
      dispon√≠veis ‚Äî ou seja, as que seguirem √† venda na nossa
      <a href="#galeria">Galeria de Ofertas</a>.
    </p>

    <p>
      Aqui complicamos em nome de um princ√≠pio simples:
      <strong>equilibrar as chances de vit√≥ria entre diferentes graus de
        contribui√ß√£o</strong>.
      Essa √© uma das principais pol√≠ticas de funcionamento do projeto:
      <strong>calibrar ganhos e apoios m√∫tuos entre quem aposta e quem
        produz</strong>.
    </p>

    <p>
      A aposta m√≠nima de <strong>R$ 30</strong> oferece
      <strong>10 % de chance</strong> de ganhar ‚Äî e essa porcentagem
      <strong>quase dobra</strong> ao escolher dois n√∫meros pelo valor
      promocional de <strong>R$ 50</strong> por par!
    </p>

    <p>
      Para trocar a sorte pela certeza, voc√™ pode garantir suas pe√ßas favoritas
      diretamente na nossa <a href="#galeria">Galeria de Ofertas</a>: com
      valores a partir de <strong>R$ 150</strong> por pe√ßa, elas estar√£o
      dispon√≠veis at√© as <strong>21h15 do dia 15</strong>, entre o encerramento
      das apostas (<strong>21h</strong>) e a divulga√ß√£o dos resultados finais
      (<strong>21h30</strong>).
    </p>

    <p>
      At√© l√°, seguimos <strong>embaralhando as probabilidades</strong> com
      <em>promo√ß√µes exclusivas</em> e
      <em>ofertas rel√¢mpago</em> para que ainda mais pessoas possam ganhar.
    </p>
</span>
    <br />

    <div
      style="
        text-align: center;
        font-weight: bold;
        margin-top: 24px;
        color: white;
      "
    >
      <span style="font-size: 1.5em; color: red;">
        BetShopTV.com<br />
        Pe√ßas √∫nicas, chances m√∫ltiplas.<br>
      </span>
      <br /><br /><br />
    </div>
  </div>
</center>

<style>
  /* üîí Garante cor branca e comportamento uniforme dos links */
    .link-fundo-branco a {  color: red !important;
    text-decoration: underline;
    }
    
        .link-fundo-branco a:hover {  color: white !important;
        background: red;
    text-decoration: none;
    }
    
</style>
<br><br><br><br>
 



</template>

    
<template id="page-como">
  <!-- üß± CABE√áALHO PRINCIPAL -->
  <section
    style="
    font-size: clamp(18px, 3vw, 27px);
    margin-bottom: clamp(8px, 3.8vw, 38px);
    margin-top: 0.4vw;
    color: RED;
    font-weight: 400;
    line-height: 1.45;
    text-align: center;
    padding: 4px clamp(27px, 3.3vw, 40px);
  }
    "
  >

    <p>
      As apostas do projeto <strong>BetShopTV.com</strong> s√£o divididas
      entre <strong>RIFAS</strong> e <strong>OFERTAS</strong>.
      <br>
      Quem participa da rifa concorre √†s pe√ßas dispon√≠veis
      na Galeria de Ofertas, onde √© poss√≠vel comprar pe√ßas diretamente
      e retir√°-las do conjunto destinado ao sorteio das rifas.
    </p>
  </section>


  <!-- üéüÔ∏è SE√á√ÉO EXPANS√çVEL RIFAS -->
  <section
    style="
      background-color: #ffffff;
      color: #2b2424;
      padding: clamp(20px, 4vw, 40px);
      max-width: 800px;
      margin: 0 auto;
    "
  >
    <h2
      style="
        color: #ff0000;
        text-transform: uppercase;
        font-weight: bold;
        margin-bottom: 16px;
      "
    >
      RIFAS
    </h2>
    <p style="margin-bottom: 12px;">
      Cada n√∫mero custa <strong>R$ 30</strong>, ou <strong>R$ 50</strong> o par.
      √â poss√≠vel apostar em quantos n√∫meros quiser para aumentar as chances no sorteio, mas aten√ß√£o: <strong>cada pessoa s√≥ poder√° ser sorteada uma vez</strong>, ainda que realize uma aposta m√∫ltipla.
    </p>
    <ul style="list-style: disc; margin-left: 20px; margin-bottom: 16px;">
      <li>Ser√£o premiadas ao menos 17 pessoas.</li>
      <li>A distribui√ß√£o depende das pe√ßas dispon√≠veis no dia do sorteio.</li>
    </ul>
    <div
      style="
        background-color: #bebab0;
        padding: 10px 16px;
        font-size: 0.95em;
        border-left: 3px solid #2b2424;
      "
    >
      <p>
        Antes de confirmar sua aposta, marque suas pe√ßas favoritas!<br>
        Essa sele√ß√£o ajuda na distribui√ß√£o final, facilitando a reserva
        das pe√ßas √†s pessoas sorteadas.<br>
        <a href="#favoritos" style="color: #bebab0; text-decoration: underline;">Saiba mais ‚ñ∏</a>
      </p>
    </div>
  </section>

  <!-- üõí SE√á√ÉO EXPANS√çVEL OFERTAS -->
  <section
    style="
      background-color: #ffffff;
      color: #2b2424;
      padding: clamp(20px, 4vw, 40px);
      max-width: 800px;
      margin: 0 auto;
    "
  >
    <h2
      style="
        color: #ff0000;
        text-transform: uppercase;
        font-weight: bold;
        margin-bottom: 16px;
      "
    >
      OFERTAS
    </h2>
    <ul style="list-style: disc; margin-left: 20px; margin-bottom: 16px;">
      <li>As pe√ßas dispon√≠veis a partir de <strong>R$ 150</strong>!</li>
      <li>TODAS as pe√ßas estar√£o em promo√ß√£o a R$ 150 antes do sorteio final, pelo per√≠odo m√≠nimo de 8 horas.</li>
      <li>As vendas diretas ocorrem<strong> at√© as 21h15 do dia 15, 
      entre o encerramento das apostas (21h) e a divulga√ß√£o dos resultados finais (21h30).</strong></li>
    </ul>
    <a href="#ofertas" style="color: white; text-decoration: underline;">Saiba mais ‚ñ∏</a>
  </section>

  <!-- üé∞ SE√á√ÉO EXPANS√çVEL SORTEIO FINAL -->
  <section
    style="
      background-color: #bebab0;
      color: #2b2424;
      padding: clamp(20px, 4vw, 40px);
      max-width: 800px;
      margin: 0 auto;
    "
  >
    <h2
      style="
        color: #ff0000;
        text-transform: uppercase;
        font-weight: bold;
        margin-bottom: 16px;
      "
    >
      SORTEIO FINAL
    </h2>
    <ul style="list-style: disc; margin-left: 20px;">
      <li>Data: <strong>15 de novembro de 2025</strong></li>
      <li>Local: <strong>Saturna Est√∫dio</strong> ‚Äî Rua Lopes de Oliveira, 166, Barra Funda, SP</li>
      <li>O sorteio ocorre durante o encerramento da exposi√ß√£o.</li>
      <li>Resultados publicados no site e Instagram <a href="https://instagram.com/betshoptv" target="_blank">@betshoptv</a>.</li>
    </ul>
    <a href="#regras" style="color: #bebab0; text-decoration: underline;">Saiba mais ‚ñ∏</a>
  </section>

  <!-- üì¶ SE√á√ÉO EXPANS√çVEL RETIRADA E ENVIO -->
  <section
    style="
      background-color: #ffffff;
      color: #2b2424;
      padding: clamp(20px, 4vw, 40px);
      max-width: 800px;
      margin: 0 auto;
    "
  >
    <h2
      style="
        color: #ff0000;
        text-transform: uppercase;
        font-weight: bold;
        margin-bottom: 16px;
      "
    >
      RETIRADA E ENVIO
    </h2>
    <p>
      As pessoas sorteadas poder√£o retirar ou receber suas pe√ßas de tr√™s modos:
    </p>
    <ol style="margin-left: 20px;">
      <li>Presencialmente no evento de sorteio em S√£o Paulo.</li>
      <li>Retirada em pontos da regi√£o central ou esta√ß√µes de Metr√¥/CPTM.</li>
      <li>Envio pelos Correios (frete n√£o incluso).</li>
    </ol>
    <p style="margin-top: 12px;">
      Todos os envios acompanham certificado e instru√ß√µes de montagem.
    </p>
  </section>

  <!-- üì¨ RODAP√â -->
  <footer
    style="
      background-color: #bebab0;
      color: #2b2424;
      text-align: center;
      padding: 20px;
      font-size: 15px;
    "
  >
    ‚òû CONTATO:
    <a href="mailto:betshoptv@gmail.com" style="color: #2b2424;">betshoptv@gmail.com</a>
  </footer>
</template>




  <!-- ========== FOOTER (kept same as v08) ========== -->
<footer>
  <div class="ftr-inner">
    <div class="contadores">
      <span id="pillCompact" class="pill-compact" style="display:none;"></span>
    </div>

    <!-- Bot√£o √∫nico: muda r√≥tulo e estado conforme total -->
    <button class="cta-main" id="ctaMain" disabled>FA√áAM SUAS APOSTAS!</button>
  </div>
</footer>


  <!-- ====== SCRIPT: modular renderers, event delegation, footer bindings ====== -->
<script>
/* ======================= CONFIG ======================= */
const PECAS_JSON_URL = 'https://betshoptv.com/dados/pecas.json';
const RIFAS_JSON_URL = 'https://betshoptv.com/dados/rifas.json';
const GAS_URL        = 'https://script.google.com/macros/s/AKfycbwsX8iGOv_mg0bhY8iRGACMGte56FXVo6ursYG_K4cq0Y50jW3g34_GX3uJU3U-Vwo0UQ/exec';

/* ======================== STATE ======================== */
let pecas = [];
let rifas = [];
const selecionadas = new Set(); // pe√ßas escolhidas
const rifasSel     = new Set(); // rifas escolhidas (ids)
const favoritos    = new Set(); // pe√ßas favoritas
let totalGeral     = 0;
  
  // FOFILTROS!!
  // FOFILTROS!!
  // FOFILTROS!!

const filtros = {
  disponiveis: false,      // "Pe√ßas" come√ßa DESLIGADO
  promo: false,            // NOVO: PROMO√á√ÉO (apenas R$ 150)
  grupos: new Set(),       // ex.: Set { '01', '02', ... }
  sort: 'group-desc'       // 'group-asc' | 'group-desc' | 'price-asc' | 'price-desc'
};




/* ======================= HELPERS ======================= */
// FORMATA EM PT-BR SEM CASAS DECIMAIS (ex.: R$ 1.500)
const fmt = (v) => {
  const n = Number(v || 0);
  // arredonda para o inteiro mais pr√≥ximo; se preferir ‚Äútruncar‚Äù, troque por Math.floor(n)
  const inteiro = Math.round(n);
  return 'R$ ' + inteiro.toLocaleString('pt-BR');
};

function imgWithFallback(src){
  const img = new Image();
  img.loading = 'lazy';
  img.src = src;
  img.onerror = () => { if (src.endsWith('.avif')) img.src = src.replace('.avif', '.jpg'); };
  return img;
}

// Contraste por YIQ (usa #2b2424 como cor escura e #fff como clara)
const getContrastColor = (hexColor) => {
  try {
    if (!hexColor) return '#2b2424';
    let s = String(hexColor).trim();
    if (s.startsWith('#')) s = s.slice(1);
    if (s.length === 3) s = s.split('').map(ch => ch + ch).join('');
    if (s.length !== 6) return '#2b2424';
    const r = parseInt(s.substring(0, 2), 16);
    const g = parseInt(s.substring(2, 4), 16);
    const b = parseInt(s.substring(4, 6), 16);
    const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
    return (yiq >= 128) ? '#2b2424' : '#ffffff';
  } catch (e) { return '#2b2424'; }
};

// Regra de pre√ßo das rifas (par = n*25; √≠mpar = (n-1)*25 + 30)
function calculateRifaTotal(count){
  count = Number(count || 0);
  if (count <= 0) return 0;
  if (count % 2 === 0) return 25 * count;
  return 25 * (count - 1) + 30;
}


// === EXTRA√á√ÉO DE GRUPOS (ex: '06' de '0609') ===
function getGruposDisponiveis(){
  const set = new Set();
  pecas.forEach(p => {
    const id = String(p.id_peca || '');
    if (id.length >= 2) set.add(id.slice(0, 2));
  });
  return [...set].sort();
}

// === BARRA DE FILTROS (reutiliz√°vel em Galeria e Feed) ===
// === BARRA DE FILTROS (1 linha no desktop; reuso em Galeria/Feed) ===
function buildFilters(currentPage){ // 'galeria' | 'feed'
  const rerender = () => (currentPage === 'galeria' ? renderGaleria() : renderFeed());

  const bar = document.createElement('div');
  bar.className = 'filters-bar';

  // √öNICA "row" que se adapta (desktop: 1 linha; mobile: quebra)
  const row = document.createElement('div');
  row.className = 'filters-row filters-row--all';

  // -------- Pe√ßas: [DISPON√çVEIS] [PROMO√á√ÉO] --------
  const gPieces = document.createElement('div');
  gPieces.className = 'filters-group';

  const lblPieces = document.createElement('span');
  lblPieces.className = 'filters-label';
  lblPieces.textContent = 'PE√áAS';
  gPieces.appendChild(lblPieces);

  const bDisp = document.createElement('button');
  bDisp.type = 'button';
  bDisp.className = 'chip';
  bDisp.textContent = 'Dispon√≠veis';
  bDisp.setAttribute('aria-pressed', filtros.disponiveis ? 'true':'false');
  bDisp.classList.toggle('is-active', !!filtros.disponiveis);
  bDisp.addEventListener('click', ()=>{
    filtros.disponiveis = !filtros.disponiveis;  // üî∏ N√ÉO mexe em nenhum outro filtro
    rerender();
  });
  gPieces.appendChild(bDisp);

  const bPromo = document.createElement('button');
  bPromo.type = 'button';
  bPromo.className = 'chip';
  bPromo.textContent = 'Promo√ß√£o';
  bPromo.setAttribute('aria-pressed', filtros.promo ? 'true':'false');
  bPromo.classList.toggle('is-active', !!filtros.promo);
  bPromo.addEventListener('click', ()=>{
    filtros.promo = !filtros.promo;              // üî∏ idem
    rerender();
  });
  gPieces.appendChild(bPromo);

  row.appendChild(gPieces);

  // -------- Grupos --------
  const gGroups = document.createElement('div');
  gGroups.className = 'filters-group';

  const lblGroups = document.createElement('span');
  lblGroups.className = 'filters-label';
  lblGroups.textContent = 'GRUPOS';
  gGroups.appendChild(lblGroups);

  const gruposDisp = getGruposDisponiveis();
  gruposDisp.forEach(g=>{
    const b = document.createElement('button');
    b.type = 'button';
    b.className = 'chip';
    b.textContent = g;
    const active = filtros.grupos.has(g);
    b.setAttribute('aria-pressed', active ? 'true':'false');
    b.classList.toggle('is-active', active);
    b.addEventListener('click', ()=>{
      const on = b.getAttribute('aria-pressed') === 'true';
      if (on) filtros.grupos.delete(g); else filtros.grupos.add(g);
      rerender();
    });
    gGroups.appendChild(b);
  });
  row.appendChild(gGroups);

  // -------- Ordenar (dropdown) --------
  const gSort = document.createElement('div');
  gSort.className = 'filters-group';

  const lblSort = document.createElement('span');
  lblSort.className = 'filters-label';
  lblSort.textContent = 'ORDENAR';
  gSort.appendChild(lblSort);

  const selSort = document.createElement('select');
  selSort.className = 'select';
  selSort.setAttribute('aria-label','Ordenar resultados');
  selSort.innerHTML = `
    <option value="group-asc">Grupo: crescente</option>
    <option value="group-desc">Grupo: decrescente</option>
    <option value="price-asc">Pre√ßo: menor ‚Üí maior</option>
    <option value="price-desc">Pre√ßo: maior ‚Üí menor</option>
  `;
  selSort.value = filtros.sort;
  selSort.addEventListener('change', ()=>{
    filtros.sort = selSort.value;                 // üî∏ idem
    rerender();
  });
  gSort.appendChild(selSort);
  row.appendChild(gSort);

  // -------- FEED (toggle de p√°gina, sem resetar filtros) --------
  const gFeed = document.createElement('div');
  gFeed.className = 'filters-group';

  const bFeed = document.createElement('button');
  bFeed.type = 'button';
  bFeed.className = 'chip';
  bFeed.textContent = 'FEED';
  const feedActive = (currentPage === 'feed');
  bFeed.setAttribute('aria-pressed', feedActive ? 'true':'false');
  bFeed.classList.toggle('is-active', feedActive);
  bFeed.addEventListener('click', ()=>{
    // üî∏ Apenas troca de p√°gina; N√ÉO toca em nenhum filtro.
    if (currentPage === 'feed') showPage('galeria');
    else showPage('feed');
  });
  gFeed.appendChild(bFeed);
  row.appendChild(gFeed);

  bar.appendChild(row);
  return bar;
}

// === lista filtrada + ordenada, compartilhada por Galeria e Feed ===
function getFilteredSortedList(source){
  let lista = Array.isArray(source) ? [...source] : [];

  // 1) Somente dispon√≠veis
  if (filtros.disponiveis) {
    lista = lista.filter(p => !/vendid/i.test(String(p.status || '')));
  }

  // 2) Promo√ß√£o (apenas R$ 150)
  if (filtros.promo) {
    lista = lista.filter(p => Number(p.preco) === 150);
  }

  // 3) Grupos (multi)
  if (filtros.grupos && filtros.grupos.size > 0) {
    lista = lista.filter(p => filtros.grupos.has(String(p.id_peca || '').slice(0,2)));
  }

  // 4) Ordena√ß√£o
  const groupKey = p => parseInt(String(p.id_peca || '').slice(0,2)) || 0;
  const numKey   = p => parseInt(p.id_peca) || 0;

  if (filtros.sort === 'price-asc') {
    lista.sort((a,b)=> (parseFloat(a.preco||0) - parseFloat(b.preco||0)));
  } else if (filtros.sort === 'price-desc') {
    lista.sort((a,b)=> (parseFloat(b.preco||0) - parseFloat(a.preco||0)));
  } else if (filtros.sort === 'group-asc') {
    lista.sort((a,b)=> (groupKey(a) - groupKey(b)) || (numKey(a) - numKey(b)));
  } else { // 'group-desc' (default)
    lista.sort((a,b)=> (groupKey(b) - groupKey(a)) || (numKey(b) - numKey(a)));
  }

  return lista;
}
 
// === FUN√á√ÉO PRINCIPAL DE RENDERIZA√á√ÉO DA GALERIA ===
function renderGaleria() {
  const app = document.getElementById('app');
  app.innerHTML = '';

  const section = document.createElement('section');
  section.id = 'galeria';

  const colunas = 3; // mant√©m seu layout atual

  // Barra de filtros (nova)
section.appendChild( buildFilters('galeria') );


  // ====== FILTRAGEM ======
// === dados da galeria obedecendo os filtros globais
let lista = getFilteredSortedList(pecas);


  // Pe√ßas (somente dispon√≠veis quando ativado)
  if (filtros.disponiveis) {
    lista = lista.filter(p => !/vendid/i.test(String(p.status || '')));
  }

// PROMO√á√ÉO (apenas R$ 150)
if (filtros.promo) {
  lista = lista.filter(p => Number(p.preco) === 150);
}


  // Grupos (multi)
  if (filtros.grupos.size > 0) {
    lista = lista.filter(p => filtros.grupos.has(String(p.id_peca || '').slice(0,2)));
  }

  // ====== ORDENA√á√ÉO ======
  const groupKey = p => parseInt(String(p.id_peca || '').slice(0,2)) || 0;
  const numKey   = p => parseInt(p.id_peca) || 0;

  if (filtros.sort === 'price-asc') {
    lista.sort((a,b)=> (parseFloat(a.preco||0) - parseFloat(b.preco||0)));
  } else if (filtros.sort === 'price-desc') {
    lista.sort((a,b)=> (parseFloat(b.preco||0) - parseFloat(a.preco||0)));
  } else if (filtros.sort === 'group-asc') {
    lista.sort((a,b)=> (groupKey(a) - groupKey(b)) || (numKey(a) - numKey(b)));
  } else { // 'group-desc' (default)
    lista.sort((a,b)=> (groupKey(b) - groupKey(a)) || (numKey(b) - numKey(a)));
  }

  // ====== GRID (mant√©m seu layout) ======
  const linhas = Math.ceil(lista.length / colunas);
  const ordenada = [];
  for (let l=0; l<linhas; l++){
    for (let c=0; c<colunas; c++){
      const idx = l * colunas + c;
      if (lista[idx]) ordenada.push(lista[idx]);
    }
  }

  const container = document.createElement('div');
  container.style = 'display:flex;gap:4px;align-items:flex-start;';
  const colsEls = Array.from({ length: colunas }, () => {
    const col = document.createElement('div');
    col.style = 'flex:1;display:flex;flex-direction:column;gap:4px;margin-top:1.8vh;';
    container.appendChild(col);
    return col; 
  });

  const alturas = Array(colunas).fill(0);
  ordenada.forEach(p=>{
    const item = document.createElement('div');
    item.className = 'gal-item';
    if (/vendid/i.test(p.status || '')) item.classList.add('sold');
    item.dataset.id = p.id_peca;

    const img = imgWithFallback('https://betshoptv.com/img/tmb/' + p.imagens[0] + '.avif');
    img.alt = p.titulo || `Pe√ßa ${p.id_peca}`;
    img.style = 'border: 1px solid #2b2424;';
    item.appendChild(img);

    let minIdx = 0;
    for (let i=1;i<colunas;i++){ if (alturas[i] < alturas[minIdx]) minIdx = i; }
    colsEls[minIdx].appendChild(item);
    alturas[minIdx] += 1;
  });

  section.appendChild(container);
  app.appendChild(section);
}

// === lista filtrada e ordenada (usada por Galeria e Feed) ===
function getFilteredSortedList(source){
  let lista = Array.isArray(source) ? [...source] : [];

  // 1. somente dispon√≠veis
  if (filtros.disponiveis) {
    lista = lista.filter(p => !/vendid/i.test(String(p.status || '')));
  }

  // 2. promo√ß√£o (R$ 150)
  if (filtros.promo) {
    lista = lista.filter(p => Number(p.preco) === 150);
  }

  // 3. grupos
  if (filtros.grupos && filtros.grupos.size > 0) {
    lista = lista.filter(p => filtros.grupos.has(String(p.id_peca || '').slice(0,2)));
  }

  // 4. ordena√ß√£o
  const groupKey = p => parseInt(String(p.id_peca || '').slice(0,2)) || 0;
  const numKey   = p => parseInt(p.id_peca) || 0;

  if (filtros.sort === 'price-asc') {
    lista.sort((a,b)=> (parseFloat(a.preco||0) - parseFloat(b.preco||0)));
  } else if (filtros.sort === 'price-desc') {
    lista.sort((a,b)=> (parseFloat(b.preco||0) - parseFloat(a.preco||0)));
  } else if (filtros.sort === 'group-asc') {
    lista.sort((a,b)=> (groupKey(a) - groupKey(b)) || (numKey(a) - numKey(b)));
  } else { // 'group-desc'
    lista.sort((a,b)=> (groupKey(b) - groupKey(a)) || (numKey(b) - numKey(a)));
  }

  return lista;
}





/* =============== FEED (POST/CARROSSEL) =============== */
function renderFeed(){
  const app = document.getElementById('app');
  app.innerHTML = '';

  const section = document.createElement('section');
  section.id = 'feed';
  
  // Barra de filtros compartilhada (indica que estamos no feed)
section.appendChild( buildFilters('feed') );

 
  const list = document.createElement('div');
  list.id = 'feedList';
  list.className = 'feed';

  // === aplica os mesmos filtros e ordem da galeria ===
const base = getFilteredSortedList(pecas);

// se quiser inverter a ordem (mais recentes primeiro), descomente a linha abaixo:
// const base = getFilteredSortedList(pecas).slice().reverse();

base.forEach(p => {
  const sold = /vendid/i.test(String(p.status || ''));
  const post = document.createElement('article');
  post.className = 'post';
  post.id = 'post-' + p.id_peca;

  const carousel = document.createElement('div');
  carousel.className = 'carousel';

  const imgs = Array.isArray(p.imagens) ? p.imagens : [];
  imgs.forEach(name=>{
    const slide = document.createElement('div');
    slide.className = 'carousel-slide';
    const img = imgWithFallback('https://betshoptv.com/img/otm/' + name + '.avif');
    slide.appendChild(img);
    carousel.appendChild(slide);
  });

  const barWrap = document.createElement('div');
  barWrap.className = 'carousel-bar-wrap';
  const bar = document.createElement('div');
  bar.className = 'carousel-bar';
  const pos = document.createElement('div');
  pos.className = 'pos';
  bar.appendChild(pos);
  barWrap.appendChild(bar);

  const meta = document.createElement('div');
  meta.className = 'meta';

  const l1 = document.createElement('div');
  l1.className = 'linha1';

  const title = document.createElement('div');
  title.className = 'titulo';
  title.textContent = p.titulo || ('Pe√ßa ' + p.id_peca);

  const price = document.createElement('div');
  price.className = 'preco';
  if (sold){
    price.textContent = '‚¨§';
    price.classList.add('sold');
  } else {
    price.textContent = fmt(p.preco);
  }
  l1.appendChild(title);
  l1.appendChild(price);

  const tecnica = document.createElement('div');
  tecnica.className = 'tecnica';
  tecnica.textContent = p.tecnica || '';

  const dims = document.createElement('div');
  dims.className = 'dimens';
  dims.textContent = p.dimensao || p.tamanho || '';

  const footerMeta = document.createElement('div');
  footerMeta.className = 'meta-footer';

  if (!sold){
    const leftActions = document.createElement('div');
    leftActions.className = 'left-actions';
    const rightActions = document.createElement('div');
    rightActions.className = 'right-actions';

    const fav = document.createElement('button');
    fav.className = 'btn fav-btn';
    fav.type = 'button';
    fav.setAttribute('aria-label', 'Favoritar ' + (p.titulo||''));
    fav.textContent = '‚ô•';
    if (favoritos.has(p.id_peca)) fav.classList.add('active');
    leftActions.appendChild(fav);

    const add = document.createElement('button');
    add.className = 'btn add-btn';
    add.type = 'button';
    const estaSel = selecionadas.has(p.id_peca);
    if (estaSel) add.classList.add('added');
    add.textContent = estaSel ? 'REMOVER' : 'ADICIONAR';
    rightActions.appendChild(add);

    footerMeta.appendChild(leftActions);
    footerMeta.appendChild(rightActions);

    fav.addEventListener('click', () => {
      const id = p.id_peca;
      if (favoritos.has(id)) favoritos.delete(id); else favoritos.add(id);
      fav.classList.toggle('active', favoritos.has(id));
      try { localStorage.setItem('BSTV_FAV', JSON.stringify([...favoritos])); } catch(e){}
      updatePills();
    });

    add.addEventListener('click', () => {
      const id = p.id_peca;
      const isAdded = add.classList.toggle('added');
      if (isAdded) selecionadas.add(id); else selecionadas.delete(id);
      add.textContent = isAdded ? 'REMOVER' : 'ADICIONAR';
      calcularTotal();
      updatePills();
    });
  }

  meta.appendChild(l1);
  if (tecnica && tecnica.textContent) meta.appendChild(tecnica);
  meta.appendChild(dims);
  meta.appendChild(footerMeta);

  post.appendChild(carousel);
  post.appendChild(barWrap);
  post.appendChild(meta);
  list.appendChild(post);

  // barra de posi√ß√£o
  (function(car, posEl){
    const slides = car.querySelectorAll('.carousel-slide');
    const total = slides.length || 1;
    function updatePos(){
      const idx = Math.round(car.scrollLeft / car.clientWidth);
      const pct = ((idx+1)/Math.max(1,total)) * 100;
      posEl.style.width = pct + '%';
    }
    car.addEventListener('scroll', ()=>{ clearTimeout(car._t); car._t = setTimeout(updatePos, 60); });
    updatePos();
  })(carousel, bar.querySelector('.pos'));
});


  section.appendChild(list);
  app.appendChild(section);
}


/* =============== RIFAS ================= */
function formatRifaLabelDOM(rawText){
  const t0 = (rawText || '').toString().trim();
  const frag = document.createDocumentFragment();
  if (!t0) { const s = document.createElement('span'); s.className = 'ln1'; s.textContent = ''; frag.appendChild(s); return frag; }

  // tokeniza (mant√©m '/')
  let tokens = t0.split(/\s+/).filter(Boolean);
  if (tokens.length >= 3 && tokens[1] === '/') {
    tokens = [ tokens.slice(0,3).join(' ') ].concat(tokens.slice(3));
  }
  if (tokens.length === 1) { const s1 = document.createElement('span'); s1.className = 'ln1'; s1.textContent = tokens[0]; frag.appendChild(s1); return frag; }

  const n = tokens.length;
  const lens = tokens.map(w=>w.length);
  const total = lens.reduce((a,b)=>a+b,0) + (n-1);
  const pref = new Array(n+1).fill(0);
  for(let i=0;i<n;i++) pref[i+1] = pref[i] + lens[i];
  const leftLen = (i)=> (i<=0?0:(pref[i] + (i-1)));

  let bestI = 1, bestDiff = Infinity;
  const minLeft=4, minRight=3;
  for(let i=1;i<n;i++){
    const L = leftLen(i), R = total-L, diff = Math.abs(L-R);
    const penalty = (L>=minLeft && R>=minRight) ? 0 : 20;
    if (diff+penalty < bestDiff) { bestDiff = diff+penalty; bestI = i; }
  }
  let part1 = tokens.slice(0,bestI).join(' ');
  let part2 = tokens.slice(bestI).join(' ');
  if (part2.length < minRight && bestI>1){
    bestI = Math.max(1,bestI-1);
    part1 = tokens.slice(0,bestI).join(' ');
    part2 = tokens.slice(bestI).join(' ');
  }
  const s1 = document.createElement('span'); s1.className = 'ln1'; s1.textContent = part1; frag.appendChild(s1);
  if (part2){ const s2 = document.createElement('span'); s2.className = 'ln2'; s2.textContent = part2; frag.appendChild(s2); }
  return frag;
}

/* =============== RIFAS ================= */
function formatRifaLabelDOM(rawText){
  const t0 = (rawText || '').toString().trim();
  const frag = document.createDocumentFragment();
  if (!t0) { const s = document.createElement('span'); s.className = 'ln1'; s.textContent = ''; frag.appendChild(s); return frag; }

  let tokens = t0.split(/\s+/).filter(Boolean);
  if (tokens.length >= 3 && tokens[1] === '/') tokens = [ tokens.slice(0,3).join(' ') ].concat(tokens.slice(3));
  if (tokens.length === 1) { const s1 = document.createElement('span'); s1.className = 'ln1'; s1.textContent = tokens[0]; frag.appendChild(s1); return frag; }

  const n = tokens.length, lens = tokens.map(w=>w.length);
  const total = lens.reduce((a,b)=>a+b,0) + (n-1);
  const pref = new Array(n+1).fill(0);
  for(let i=0;i<n;i++) pref[i+1] = pref[i] + lens[i];
  const leftLen = (i)=> (i<=0?0:(pref[i] + (i-1)));

  let bestI = 1, bestDiff = Infinity;
  const minLeft=4, minRight=3;
  for(let i=1;i<n;i++){
    const L = leftLen(i), R = total-L, diff = Math.abs(L-R);
    const penalty = (L>=minLeft && R>=minRight) ? 0 : 20;
    if (diff+penalty < bestDiff) { bestDiff = diff+penalty; bestI = i; }
  }
  let part1 = tokens.slice(0,bestI).join(' ');
  let part2 = tokens.slice(bestI).join(' ');
  if (part2.length < minRight && bestI>1){
    bestI = Math.max(1,bestI-1);
    part1 = tokens.slice(0,bestI).join(' ');
    part2 = tokens.slice(bestI).join(' ');
  }
  const s1 = document.createElement('span'); s1.className = 'ln1'; s1.textContent = part1; frag.appendChild(s1);
  if (part2){ const s2 = document.createElement('span'); s2.className = 'ln2'; s2.textContent = part2; frag.appendChild(s2); }
  return frag;
}

function renderRifas(){
  const app = document.getElementById('app');
  app.innerHTML = '';

  const section = document.createElement('section'); 
  section.id = 'rifas';

  /* ---- HERO / CABE√áALHO DA P√ÅGINA ---- */
  const hero = document.createElement('div');
  hero.className = 'rifa-hero';
  hero.innerHTML = `
    <span class="badge">APOSTA DISPON√çVEL</span>
    <h2><em>Chop Shop AV</em></h2>

    <p class="desc">
      Impress√£o offset em papel couch√© transferida para EVA
    </p>
    <p class="spec">Pol√≠ptico, dimens√µes vari√°veis.</p>
<br>
    <div class="precos">
      <span class="pill">R$ 30 = 1 n√∫mero</span>&nbsp;
      <span class="pill">R$ 50 = 2 n√∫meros</span>
    </div>
<br>
    <p class="hint">
      J√° viu a <span class="strong"><a href="#galeria">Galeria de Ofertas</a></span>? Gostou de pe√ßas espec√≠ficas?</p>
    <p class="hint">  
      Selecione suas favoritas no <span class="strong"><a href="#feed">Feed</a></span> <em>antes</em> de concluir a compra!</p> 
    <p class="hint">  
      Assim, caso seu n√∫mero seja sorteado, suas chances de ganhar as pe√ßas escolhidas aumenta!
    </p><br>
    <p class="hint" style="color: #ff0000;">Clique nos n√∫meros abaixo para selecion√°-los e no bot√£o APOSTAR para prosseguir.</p>
  `;
  section.appendChild(hero);

  /* ---- GRADE DE RIFAS ---- */
  const grid = document.createElement('div'); 
  grid.className = 'rifas';

  rifas.forEach(r=>{
    const disponivel = !r.status_rifa || String(r.status_rifa).trim() === '';
    const btn = document.createElement('button');
    btn.className = 'rifa-btn' + (disponivel ? '' : ' sold');

    const bg = r.hex_rifa || r.hex || '#777';
    btn.style.backgroundColor = bg;
    btn.style.color = getContrastColor(bg);
    btn.dataset.id = r.id_rifa;

    let rawLabel = (r.botao_rifa && String(r.botao_rifa).trim()) ? String(r.botao_rifa).trim()
                  : (r.numero || r.id_rifa || '').toString();
    rawLabel = rawLabel.replace(/^\s*X\s*/i,'').trim();

    btn.appendChild( formatRifaLabelDOM(rawLabel) );
    btn.style.textAlign = 'left';
    btn.setAttribute('aria-label', rawLabel);

    if (disponivel){
      btn.addEventListener('click', ()=>{
        const wasSelected = btn.classList.contains('selected');
        if (wasSelected){
          btn.classList.remove('selected');
          btn.style.backgroundColor = bg;
          btn.style.color = getContrastColor(bg);
          btn.style.borderColor = '';
          rifasSel.delete(r.id_rifa);
        }else{
          btn.classList.add('selected');
          btn.style.backgroundColor = '#ffffff';
          btn.style.color = '#ff0000';
          btn.style.borderColor = '#ff0000';
          rifasSel.add(r.id_rifa);
        }
        calcularTotal();
        updatePills();
      });
    }

    grid.appendChild(btn);
  });

  section.appendChild(grid);
  app.appendChild(section);
}



/* =============== NAVEGA√á√ÉO / HASH ================= */
function showPage(page, opts = {}) {
  const updateHash = (typeof opts.updateHash === 'boolean') ? opts.updateHash : true;
  const pieceId    = opts.pieceId || null;

  if (page === 'galeria') renderGaleria();
  else if (page === 'feed') {
    renderFeed();
    if (pieceId) setTimeout(()=> openFeedAt(pieceId), 80);
  }
  else if (page === 'rifas') renderRifas();
  else if (page === 'sobre') renderSobreProjeto();
  else if (page === 'como') renderComoFunciona();
  else renderGaleria();

  updatePills(); calcularTotal();
  
  // üßπ Scrolla pro topo em todas as p√°ginas, exceto feed
if (page !== 'feed') {
  setTimeout(() => window.scrollTo(0, 0), 10);
}


  if (updateHash){
    let newHash = page;
    if (pieceId){
      const params = new URLSearchParams(); params.set('p', pieceId);
      newHash = `${page}?${params.toString()}`;
    }
    if (location.hash !== '#' + newHash) location.hash = newHash;
  }
    updateNavActive(); // ‚Üê marca o bot√£o ativo do menu

}

// === Atualiza o destaque ativo no menu do cabe√ßalho ===
function updateNavActive(forcedPage = null) {
  const { page } = parseHash();
  const current = forcedPage !== null ? forcedPage : page;

  document.querySelectorAll('.nav a').forEach(a => {
    const target = a.getAttribute('href').replace('#','');

    // Se estiver na home (sem hash ou #home), nenhum bot√£o fica ativo
    if (!location.hash || current === 'home') {
      a.classList.remove('active');
    } else {
      a.classList.toggle('active', target === current);
    }
  });
}



function parseHash(){
  const raw = (location.hash || '').slice(1);
  if (!raw) return { page: 'galeria', params: new URLSearchParams() };
  const [pagePart, query] = raw.split('?');
  return { page: pagePart || 'galeria', params: new URLSearchParams(query || '') };
}

function handleHashChange() {
  const { page, params } = parseHash();

  // Sem hash ou #home ‚Üí mostra conte√∫do da home
  if (!location.hash || page === 'home') { 
    renderHome();
    updateNavActive(''); // nenhum bot√£o ativo
    return;
  }

  if (page === 'feed') {
    const p = params.get('p');
    if (p) showPage('feed', { updateHash: false, pieceId: p });
    else   showPage('feed', { updateHash: false });

  } else if (page === 'rifas') {
    showPage('rifas', { updateHash: false });

  } else if (page === 'sobre') {
    renderSobreProjeto();

  } else if (page === 'como') {
    renderComoFunciona();

  } else {
    showPage('galeria', { updateHash: false });
  }

  updateNavActive(page);
}



window.addEventListener('hashchange', handleHashChange);

// links do header passam a escrever o hash
document.querySelectorAll('.nav a').forEach(a => {
  a.addEventListener('click', (e) => {
    const href = a.getAttribute('href') || '';
    if (href.startsWith('#')) {
      e.preventDefault();
      const target = href.slice(1);
      showPage(target); // Chama diretamente
    }
  });
});


/* =============== Delega√ß√£o no #app =============== */
function attachAppDelegation(){
  const app = document.getElementById('app');
  app.addEventListener('click', (e)=>{
    // item da galeria abre o feed na pe√ßa
    const galleryItem = e.target.closest('.gal-item');
    if (galleryItem){
      const id = galleryItem.dataset.id;
      if (id) location.hash = 'feed?p=' + encodeURIComponent(id);
      return;
    }
  });
}

/* =============== Checkout (igual ao que j√° funcionava) =============== */
/* ====== Bind do CTA principal (checkout inline) ====== */
/* =============== Bind do CTA principal (checkout inline) =============== */
/* =============== Bind do CTA (Dados ‚Üí PIX ‚Üí Enviar) =============== */
function attachBindings(){
  const cta = document.getElementById('ctaMain');
  if (!cta) return;

  // util: BR Code PIX (CRC16 CCITT 0xFFFF)
  const crc16 = (data)=>{
    let crc=0xFFFF;
    for(let i=0;i<data.length;i++){
      let x=((crc>>8)^data.charCodeAt(i))&0xff; x^=x>>4;
      crc=(crc<<8)^(x<<12)^(x<<5)^x;
    }
    return (crc&0xFFFF).toString(16).toUpperCase().padStart(4,'0');
  };
  const gerarBRCode = (valorBRL)=>{
    const chavePix="betshoptv@gmail.com";
    const nome="BET SHOP TV".substring(0,25).toUpperCase();
    const cidade="SAO PAULO".substring(0,15).toUpperCase();
    const txid="***";
    const f=(id,val)=> id + String(val.length).padStart(2,'0') + val;

    const v = Number(Math.floor(valorBRL||0)).toFixed(2); // 2 casas no campo 54
    let pl="000201";
    pl+=f('26',`0014BR.GOV.BCB.PIX01${String(chavePix.length).padStart(2,'0')}${chavePix}`);
    pl+='52040000'; pl+='5303986';
    pl+=f('54', v);
    pl+='5802BR'; pl+=f('59',nome); pl+=f('60',cidade); pl+=f('62',f('05',txid)); pl+='6304';
    return pl + crc16(pl);
  };

  cta.onclick = (e) => {
    if (cta.disabled) return; // sem sele√ß√£o, ignora
    e.preventDefault();
    calcularTotal();

    // PASSO 1 ‚Äì DADOS
    const app = document.getElementById('app');
    app.innerHTML = `
      <section id="checkout">
        <div style="max-width:520px;  margin:0 auto; height: 6.9vw; max-height: 33px;margin-bottom: 3vw;">
          <h2 style="font-size: 16px;font-weight:300; color:#2b2424; text-transform: uppercase; margin-bottom:24px;">Preencha seus dados abaixo:</h2>
          <label>Nome *</label><input id="ck_nome" type="text" style="width:100%;height: 6.9vw; max-height: 33px;margin-bottom: 3vw;">
          <label>E-mail *</label><input id="ck_email" type="email" style="width:100%;height: 6.9vw; max-height: 33px;margin-bottom: 3vw;">
          <label>Telefone</label><input id="ck_fone" type="tel" style="width:100%;height: 6.9vw; max-height: 33px; margin-bottom: 3vw;">
          <div style="display:flex;gap:8px;margin-top:12px;">
            <button id="ck_voltar" style="flex:1; height: 7.5vw; max-height: 38px;">Voltar</button>
            <button id="ck_to_pix" style="flex:1;height: 7.5vw; max-height: 38px;background:var(--red);color:#fff">Avan√ßar</button>
          </div>
        </div>
      </section>
    `;

    document.getElementById('ck_voltar').onclick = () => handleHashChange();

    document.getElementById('ck_to_pix').onclick = ()=>{
      const nome  = (document.getElementById('ck_nome').value || '').trim();
      const email = (document.getElementById('ck_email').value || '').trim();
      const fone  = (document.getElementById('ck_fone').value || '').trim();
      if (!nome || !email) { alert('Preencha nome e e-mail.'); return; }

      // Preenche o form oculto j√° agora
      document.getElementById('fNome').value    = nome;
      document.getElementById('fEmail').value   = email;
      document.getElementById('fTelefone').value= fone;
      document.getElementById('fPecas').value   = [...selecionadas].join(',');
      document.getElementById('fRifas').value   = [...rifasSel].join(',');
      document.getElementById('fFav').value     = [...favoritos].join(',');
      document.getElementById('fTotal').value   = Number(Math.floor(totalGeral||0)).toFixed(2);

      // PASSO 2 ‚Äì PIX
      const totalInt = Math.floor(totalGeral||0);
      const payload = gerarBRCode(totalInt);

      app.innerHTML = `
        <section id="checkout-pix">
          <div style="max-width:720px;margin:0 auto;background:#fff;border:1px solid #2b2424;padding:20px">
            <h2>Pagamento via PIX</h2>
            <p style="margin:.5rem 0 1rem 0;"><strong>Total:</strong> R$ ${totalInt}</p>
            <div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap">
              <div id="ck_qr" style="width:180px;height:180px;border:1px solid #2b2424;display:flex;align-items:center;justify-content:center;background:#fff"></div>
              <div style="flex:1;min-width:240px">
                <button id="ck_copy" style="border:2px solid var(--ink);background:#fff;padding:8px 12px;cursor:pointer">PIX Copia e Cola</button>
                <div id="ck_payload" style="display:none;">${payload}</div>
              </div>
            </div>
            <div style="display:flex;gap:8px;margin-top:14px">
              <button id="ck_back_data" style="flex:1">Voltar</button>
              <button id="ck_finish" style="flex:1;background:var(--red);color:#fff;">ENVIAR APOSTA</button>
            </div>
          </div>
        </section>
      `;

      // Render QR (se a lib existir)
      (function renderQR(){
        const holder = document.getElementById('ck_qr');
        if (!holder) return;
        holder.innerHTML = '';
        if (window.QRCode){
          new QRCode(holder, { text: payload, width: 180, height: 180, correctLevel: QRCode.CorrectLevel.M });
        } else {
          // fallback: mostra o payload leg√≠vel
          holder.style.fontSize = '10px';
          holder.style.padding = '6px';
          holder.textContent = payload;
        }
      })();

      // Copiar
      document.getElementById('ck_copy').onclick = ()=>{
        const txt = document.getElementById('ck_payload').textContent;
        const done = (ok)=>{
          const btn = document.getElementById('ck_copy');
          const old = btn.textContent;
          btn.textContent = ok ? 'PIX copiado!' : 'Erro ao copiar';
          setTimeout(()=> btn.textContent = old, 1600);
        };
        if (navigator.clipboard?.writeText) {
          navigator.clipboard.writeText(txt).then(()=>done(true)).catch(()=>done(false));
        } else {
          const ta=document.createElement('textarea'); ta.value=txt;
          ta.style.position='fixed'; ta.style.top='-9999px'; document.body.appendChild(ta);
          ta.select(); try{ document.execCommand('copy'); done(true);} catch(e){ done(false); }
          document.body.removeChild(ta);
        }
      };

      // Voltar aos dados
      document.getElementById('ck_back_data').onclick = ()=> cta.onclick(e);

      // Enviar (GAS best-effort + FormSubmit)
document.getElementById('ck_finish').onclick = async ()=>{
  const btn = document.getElementById('ck_finish');
  if (btn._busy) return;
  btn._busy = true;
  btn.disabled = true;
  const old = btn.textContent;
  btn.textContent = 'Enviando aposta...';

  try {
    const fd = new FormData();
    fd.append('nome', document.getElementById('fNome').value);
    fd.append('email', document.getElementById('fEmail').value);
    fd.append('telefone', document.getElementById('fTelefone').value);
    fd.append('pecas', document.getElementById('fPecas').value);
    fd.append('rifas', document.getElementById('fRifas').value);
    fd.append('favoritas', document.getElementById('fFav').value);
    fd.append('total', document.getElementById('fTotal').value);

    await fetch(GAS_URL, { method:'POST', body:fd });

    // redireciona ap√≥s envio
    location.href = 'https://betshoptv.com/obrigado.html';

  } catch(err){
    console.error('Erro ao enviar dados para GAS:', err);
    btn._busy = false;
    btn.disabled = false;
    btn.textContent = old;
    alert('Erro ao enviar aposta. Tente novamente.');
  }
};
    };
  };
}




/* =============== Pills e Total ================= */
/* ====== Footer: pills compactas + CTA din√¢mico ====== */
function updatePills(){
  const nbsp = '\u00A0';                           // espa√ßo n√£o-quebr√°vel
  const pill = document.getElementById('pillCompact');
  const cta  = document.getElementById('ctaMain');

  // monta lista s√≥ com contadores > 0 (mobile-friendly)
  const parts = [];
  if (selecionadas.size > 0) {
    parts.push(`${selecionadas.size}${nbsp}${selecionadas.size === 1 ? 'Pe√ßa' : 'Pe√ßas'}`);
  }
  if (rifasSel.size > 0) {
    parts.push(`${rifasSel.size}${nbsp}${rifasSel.size === 1 ? 'Rifa' : 'Rifas'}`);
  }
  if (favoritos.size > 0) {
    parts.push(`${favoritos.size}${nbsp}${favoritos.size === 1 ? 'Favorita' : 'Favoritas'}`);
  }

  // mostra/oculta a pill compacta
  if (pill) {
    pill.textContent = parts.join(' ¬∑ ');
    pill.style.display = parts.length ? 'inline-block' : 'none';
  }

  // CTA √∫nico: label e estado
  if (cta) {
    if (totalGeral > 0) {
      // fmt() j√° remove casas decimais
      cta.textContent = `APOSTAR ${fmt(totalGeral)}`;
      cta.disabled = false;
    } else {
      cta.textContent = 'FA√áAM SUAS APOSTAS!';
      cta.disabled = true;
    }
  }
    // marca estado no footer para o CSS reagir
  const footer = document.querySelector('footer');
  if (footer) {
    footer.classList.toggle('has-total',  totalGeral > 0);
    footer.classList.toggle('no-total',   totalGeral === 0);
  }

}


function calcularTotal(){
  let total = 0;

  // Pe√ßas
  selecionadas.forEach(id => {
    const p = pecas.find(x => x.id_peca === id);
    if (p && p.preco) total += parseFloat(p.preco);
  });

  // Rifas: regra de paridade
  const nR = rifasSel.size || 0;
  const totalRifas = (nR <= 0) ? 0 : (nR % 2 === 0 ? 25*nR : 25*(nR-1)+30);
  total += totalRifas;

  totalGeral = total;

  // Atualiza hidden form (mant√©m duas casas para o form)
  const fTotal = document.getElementById('fTotal');
  if (fTotal) fTotal.value = totalGeral.toFixed(2);

  // Sincroniza CTA/pills ap√≥s recalcular
  updatePills();
}


/* =============== Abrir pe√ßa dentro do feed ================= */
/* =============== Abrir pe√ßa dentro do feed (ajuste sem scroll suave + sem foco) ================= */
function openFeedAt(id){
  const tryScroll = ()=>{
    const el = document.getElementById('post-' + id);
    if (!el) return false;

    // remove foco autom√°tico (evita moldura azul)
    if (document.activeElement && document.activeElement.blur) {
      document.activeElement.blur();
    }

    // rola imediatamente, sem anima√ß√£o
    el.scrollIntoView({ behavior: 'auto', block: 'start' });

    // compensa a altura do cabe√ßalho fixo (ajuste fino)
    const headerHeight = document.querySelector('header')?.offsetHeight || 100;
    window.scrollBy(0, -headerHeight);

    return true;
  };

  if (document.getElementById('feedList')){
    if (!tryScroll()) setTimeout(tryScroll, 120);
  } else {
    renderFeed();
    setTimeout(tryScroll, 100);
  }
}


/* ======================== INIT ======================== */
async function init(){
  try{
    // come√ßar com favoritos zerados (como pedido)
    localStorage.removeItem('BSTV_FAV'); favoritos.clear();

    const [rp, rr] = await Promise.all([
      fetch(PECAS_JSON_URL, { cache:'no-store' }),
      fetch(RIFAS_JSON_URL, { cache:'no-store' })
    ]);
    if (!rp.ok || !rr.ok) throw new Error('Falha ao carregar JSONs');

    pecas = await rp.json();
    rifas = await rr.json();

    // render inicial conforme hash
    attachAppDelegation();
    attachBindings();
    handleHashChange();

    updatePills();
    calcularTotal();
  }catch(e){
    console.error('Init error', e);
    document.getElementById('app').innerHTML =
      '<div style="padding:20px;color:#900;">Erro ao carregar dados. Veja o console.</div>';
  }
}
function renderHome() {
  const app = document.getElementById('app');
  const tpl = document.getElementById('page-sobre');
  app.innerHTML = '';
  if (tpl) app.appendChild(tpl.content.cloneNode(true));
}

  function renderSobreProjeto(){
  const app = document.getElementById('app');
  const tpl = document.getElementById('page-sobre'); 
  app.innerHTML = '';
  if (tpl) app.appendChild(tpl.content.cloneNode(true));
} 

function renderComoFunciona(){
  const app = document.getElementById('app');
  const tpl = document.getElementById('page-como');
  app.innerHTML = '';
  if (tpl) app.appendChild(tpl.content.cloneNode(true));
}

let modalAtivo = null;

function abrirModal(el) {
  const id = el.dataset.modalId;
  const modal = document.getElementById(`modal-${id}`);
  if (!modal) return;

  fecharModal();
  modal.style.display = 'flex';
  modalAtivo = modal;

  modal.scrollTop = 0; // üëà Corrige abertura ‚Äúcolada‚Äù ao clique

  document.addEventListener('keydown', fecharPorEsc);
  modal.addEventListener('click', cliqueFora);
}


function fecharModal() {
  if (!modalAtivo) return;

  modalAtivo.style.display = 'none';
  document.removeEventListener('keydown', fecharPorEsc);
  modalAtivo.removeEventListener('click', cliqueFora);
  modalAtivo = null;
}

function fecharPorEsc(e) {
  if (e.key === 'Escape') fecharModal();
}

function cliqueFora(e) {
  if (e.target === modalAtivo) fecharModal();
}


function escFecharModal(e) {
  if (e.key === 'Escape') fecharModalAgende();
}

function cliqueForaModal(e) {
  if (e.target.id === 'modal-agende') fecharModalAgende();
}


function fecharModalAgende() {
  const modal = document.getElementById('modal-agende');
  if (modal) modal.style.display = 'none';
}


window.addEventListener('DOMContentLoaded', init);

/* S√≥ monitora altera√ß√µes perigosas no footer (aviso em console) */
(function(){
  const footer = document.querySelector('footer');
  if (!footer) return;
  const mo = new MutationObserver(()=>{
    if(!document.getElementById('btnCheckout')){
      console.warn('Footer alterado: btnCheckout ausente. Verifique altera√ß√µes acidentais no header/footer.');
    }
  });
  mo.observe(footer, { childList:true, subtree:true });
})();




</script>
<!-- Campos ocultos (essenciais para o GAS funcionar) -->
<input type="hidden" id="fNome">
<input type="hidden" id="fEmail">
<input type="hidden" id="fTelefone">
<input type="hidden" id="fPecas">
<input type="hidden" id="fRifas">
<input type="hidden" id="fFav">
<input type="hidden" id="fTotal">

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" referrerpolicy="no-referrer"></script>


<script>
  // üß† For√ßa o modo horizontal no desktop, mas mant√©m slider no mobile
  document.addEventListener("DOMContentLoaded", function () {
    const feed = document.querySelector(".feed-wrapper");
    if (!feed) return;

    const handleFeedMode = () => {
      if (window.innerWidth > 1024) {
        feed.classList.add("feed-desktop");
        feed.classList.remove("feed-mobile");
      } else {
        feed.classList.add("feed-mobile");
        feed.classList.remove("feed-desktop");
      }
    };

    handleFeedMode();
    window.addEventListener("resize", handleFeedMode);
  });
</script>


<script>
/* üîß Corrige o comportamento de rolagem nas √¢ncoras da p√°gina
   ‚Äî sempre alinha ao topo (exceto o Feed) */
(function(){
  document.addEventListener("click", function(e){
    const link = e.target.closest("a[href^='#']");
    if(!link) return;

    const targetId = link.getAttribute("href").substring(1);
    const targetEl = document.getElementById(targetId);

    // s√≥ atua em se√ß√µes internas existentes
    if(!targetEl) return;

    // impede o comportamento padr√£o do navegador
    e.preventDefault();

    // exce√ß√£o: feed deve manter o comportamento original
    if(targetId === "feed") {
      window.location.hash = "#feed";
      return;
    }

    // rola at√© o topo da se√ß√£o com comportamento suave
    targetEl.scrollIntoView({
      behavior: "smooth",
      block: "start"
    });

    // for√ßa o hash na URL para manter o estado da p√°gina
    history.replaceState(null, "", "#" + targetId);
  });

  /* üß© adicional: se o usu√°rio entra com uma √¢ncora na URL,
     garante que ela alinhe ao topo tamb√©m */
  window.addEventListener("load", () => {
    const id = location.hash.replace("#", "");
    const el = id && document.getElementById(id);
    if(el && id !== "feed"){
      setTimeout(() => el.scrollIntoView({ behavior: "auto", block: "start" }), 50);
    }
  });
})();
</script>

<!-- üî≥ MODAIS GERAIS -->
<div id="modal-agende-visita" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <button class="modal-close" onclick="fecharModal()">‚úï</button>
    <h2>AGENDE AQUI</h2>
    <p>Entre em contato por mensagem direta para visitar a exposi√ß√£o.</p>
  </div>
</div>

<div id="modal-fave-checkout" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <button class="modal-close" onclick="fecharModal()">‚úï</button>
    <h2>FAVORITOS E CHECKOUT</h2>
    <p>Reveja suas pe√ßas favoritas antes de finalizar a aposta.</p>
  </div>
</div>


</body>
</html>
